<html lang="es"><head><script src="/__replco/static/devtools/eruda/3.2.3/eruda.js"></script><style type="text/css">.eruda-search-highlight-block{display:inline}.eruda-search-highlight-block .eruda-keyword{background:#332a00;color:#ffcb6b}</style><script src="/__replco/static/devtools/injected.js" onerror="parent.postMessage({event:'error',payload:'script.onerror: Failed to load '+event.target.src},'https://replit.com')"></script><style type="text/css">@font-face{font-family:eruda-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAA6UAAsAAAAAGvAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAARoAAAHeLjoycE9TLzIAAAIkAAAAPwAAAFZWm1KoY21hcAAAAmQAAAFdAAADwhPu1O9nbHlmAAADxAAAB+wAAA9I7RPQpGhlYWQAAAuwAAAAMQAAADZ26MSyaGhlYQAAC+QAAAAdAAAAJAgEBC9obXR4AAAMBAAAAB0AAACwXAv//GxvY2EAAAwkAAAAOwAAAFpuVmoybWF4cAAADGAAAAAfAAAAIAE9AQ1uYW1lAAAMgAAAASkAAAIWm5e+CnBvc3QAAA2sAAAA5QAAAU4VMmUJeJxNkD1Ow0AQhb9NHGISCH9RiB0cErCNHRrqFFSIyqKiQHSpEFJERUnBCTgPZ+AEHIe34wDe1f69efPezOKAHldc07q5re4ZrFevL8QE1MPHm3e3fn5aEf6+FAvsDHHuTUoxd7zzwSdffLulq9wjLbaYau8TacZMONE554xzZsrtNfBEzFOhbSmOyTmga0ikvRR/37RSsSMyDukYPjWdgGOtsSK55Y/k0Bf/ksK0MrbFr70idsVZKNPnDcSay3umd2TISCvWTJSxI78lFQ/C+qbv/Zo9tNXDP55ZL7k0Q90u5F5XX0qrYx16btccCtXg/ULrKzGFuqY9rUTMhf3fkCNj+MxUnsM/frr5Qx+ZbH4vVQ0F5Q/ZQBvxAAB4nGNgZJJgnMDAysDA1Mt0hoGBoR9CM75mMGLkAIoysDIzYAUBaa4pDAcYdD+KsIC4MSxMDIxAGoQZALgnCOUAeJy1011SGlEQhuF3BFHxD5UUyr8gIJIsiiKJsSqJlrHKsJssKFeuxF6Bfj3dF96aqhzqoZnDzJyG8w2wCVTko1SheKLAx1/NFuV8hXo5X+WPjht6+fmfWHLDHQ+srfnykjMrvnPPoxXlzNtRlFc26HLBZblal1N9ntBnwIgx5/SYMaWt78+YM6TDgitduaEVq+q0xhbb7KifPQ441N2OOOaEJh9oaYka7xvdd57vQz1P+oPR+Bx6s2lbrc6H0Flc/cO9/sfY87fiOY8u8X0J/muX6VRW6UI+p4l8SX35mgZynUbyLY3lJukf0e6HnvxIM/mZpnKb2nKXvM/7dCa/0lwe0lAeU0d+p4Wsk3bBiuDptY2A10rw9Fo1eOJtM/iTYLWA162A1+2A152A13rwJ8R2g++AJaUU2w/KK3YQlFzsMCjDWCMozdhRUK6x46CEYydBWceagdYraihRngAAAHic7RdbbBxX9Z57Z2d2d2ZndryzM7ve9ax3NztjO/bann0lTuW16zoBJSWJ7Zg83NiUJCQ1Ik2ikKQJNC9FFQqVEG0RVLQoSpEKH2klqgpEIyWAUMRTNBJC/PUDhETgiwhQd8y5s1s7oqr624/srO6ce89zzjn3nHsJEPwxyn5GVEJKBTcCdc80pAiYhkjfNWL+NnhLdTKqfxVOqJlxFX6E84wb86/6X4+5GRLw0/vsOgkREoFGBFx62P/uFviBP78FWrC02d/r79vcpmMl+k2uBwwJxIILTrVeyXsmK8krRLb5YGqUaCb9ksYnMuBqMtnRcY6V1nidml6texaY9CxSRm3TtKNIjcxrUjhEWKD3OnuNJEgPKSG/I6nUpo06fxwXH8lmEoyDFQIVyrROs7254z990rj0u2PLez47WqG1yu69V7ZdfDxU9He4C6P+v+HN+vlnD9Uou0Zp+NnfvveT/XL0kbGFxT/u37tx7CTdeuGlKfiibcMr/gt9qfyu05e4+YEdb7A3iEVG0ArdEAvDIPHBqTbB7bgCDA0sdH0x3/nEHDT4YFJi9siz74iaOBkK3ZyRTRXwE+FGG15BeA0Pf14hqinP3AyFJnHhnVm5xzThmNSBNFjDdvwzw75GFJIlvWhZ1UHlYlI3zIputa3CSduiRF7P09e9on+jODpanPOKsJMDOPV2wU7/BqsVPcQ2ix41X/8ARKpbfhPVtHNgik1hXAhIlmQ1rIbbcCVIzN/7+65794KRTc13IBwJXVkhRACBkAEyhVyiBqJbRn81YRjKUDfRN9xHpoVBt0xJRZ+iS4ehZFg2utJrjCO2GrAUAizcj+c3pXpiXVQwThZmdNrbrx+hAjtjbhSF5FPyKSsqmGraWKYCbfl97vMLi79fXHje7XsAhBsoo0P35fyMPpCj+lM0FDptJexuYzl82upRufxlKgrTh/+fOwBXc+Jt9jZJBTnxUbH/yGT5j4jRT2pB9O1oO/oi3FyD2/ggU14LY/j5RuHTJIZf5LR/WVmbaB2CT6xdQa4KwJZIHPfyMFoWRNSmQZDLlJVpdRw8GwwVWEGlScOGijdOq2VKyfHDB7/d1/+d37zXeT/dXG42l7/Kh2a20pd0JpxsxTVNt8KWyuu/94Ujr+7uvFpvQXP5PCfEAU4l+6pZZ9Ix3eqGqmsGrvok28V+zi6TKEYyi/Udt0MNavkkJC1e+vQA1tGqil6EV93j/UBbY0AXm/2Vku+z53x/8MDT5879U9Nb4Cqq/yf/WEjReiECfS9+C2f/6umFS/77q3t7kp0nGu8DTrFTQrwG1KtsoHVXlnXL0qMKHTRpGbaJlt7aoVsSbO3aQFb5L7MTJElIwrBMvnWxQteCEl2QREn8Ci/Ef9i7u1IT6tX5Pb/ePV+rUXKEL3DMkUPzc6OeNzo3/6C8K2QdrzVlKAYyHhBcxGgUyoCRqXimJZXYwYO1y1tWxQWKLkyfunpqevrU5vJs4SQ02JUDw94qMlC6maORJpc9AR/Sm7C4cK7S4MoL/FNqFYy+Nw5VbpIoWaWXP0atf+fj1Lb36w12h6SxShIouuNQw+TCVDNsWvHqDStpNUoFnobUs6mhUvpmn+r2VxaeuXjmCc974vSjm44OxfytrXeH5iaKxYm5fXMThcLEHLwcGzq66dHTnObMxWcWKv2u2tfa1ipMzu7rEM5OFshqLfsFu4R9thszrVjAUoHFgH98DxRreb3CK74rMTh/bWmJTq9Pd0nCZOvsbfrYrVsTty9cOPc5Or2U6spq8rXbrbNAL9yeuHWLYuEnEiErK0JIAPIN8kNyl9wn/yUt7mioN6GGTi1jDQrypNPRxQ+8zREatnUsVtgbcDHAaZA0rc6TxOIWLPFVXLDbvYRT45CDSnBOqFhee4aTcWw8gapGnS+Z+EYrOuqh825jrY5WSVwPDSewh/OWqYueCJQFEjhELTdgcdEODjUCo5yge7lcAlJxRSgceyZyu5LFfqnaeldKlsyunnK6N6LEaUSqTSndgpZK7jC7NZaR7LGcGhXwgMNC+WFt0MxEomZcECQ9EY4JkgAQDilSNKnGuxXJ0u2hdG9YUZkiZcfWpaOWkUv0G6IaCseVVH81o0dEEClKGokassX0hKSk44PxBGOS4E8cmNk+OMSY5+2cXfz8zI4hrG4jI9tnFpW/hqKx7PCnH1O7wpFkqeANT4IUVhopPTUwnNJxzSlUzLASV+4YfUIkpoQFTYvoMUFkJgtJ/Z6VEIyymx4usdCW5CuDc9s+dZDm6GeiejTl1jN6VFKUdMHMlUIWzaQEOdyrKHIsL0VZJB0TE1rUlLvCo71yPKya3dW+ONBQRBajUdPuKoXFsBAOiYoUdx7JtSXlU3ZJNAW1O+4ktBCFqBjLJhMW97JgyonISE5kVIJQJJ6tO6nueCJj1TV/D6uMzu06tH/H44NlRr3RnbNPLu7cXh75sWOklURzi5ZI9dgqG6tuEAf0bkWX0/0j6S6+RjfaYiQsbkKHhuNdms6kUExWZNGSlJgzkjIGjPK61KjLxOvGc/1/27r9KOQe7omHe+LhnvjQnmArLTyHMYHiPbGbFLEL4Q1BxOsiHrfy2HIBz67BXQbPsVbB4TNDZP/wF4x63cAxUl/PRtbXI61f2QM2/iuZUqleKr3ABp1Mxnn/rjvpOJN0b9K2k/73+Xi/VHOcGl4qyf8AzjWNo3icY2BkYGAA4uhnXafj+W2+MnCzgASiOB/va4DR///+/8/CysIElOBgAJEMAHS2DWQAAAB4nGNgZGBgYQABFtb/f///ZWFlYGRABToAW+YEPQAAAHicY2BgYGAhiP//J6wGCbNCMcP/vwxUBgDl4QRhAAAAeJxjYAACBQYThiCGAoYtjAyMZowBjPuYuJjCmBYxvWNWYXZhzmFewfyIRYUliPUOexr7EmIhAF3rF0sAeJxjYGRgYNBhZGRgZwABJiDmAkIGhv9gPgMADcIBTAB4nGWQPW7CQBSEx2BIAlKCFCkps1UKIpmfkgNAT0GXwpi1MbK91npBossJcoQcIaeIcoIcKGPzaGAtP38zb97uygAG+IWHenm4bWq9WrihOnGb9CDsk5+FO+jjRbhLfyjcwxumwn084p07eP4dnQFK4Rbu8SHcpv8p7JO/hDt4wrdwl/6PcA8r/An38eoN08gUsSncUif7LLRnef6utK1SU6hJMD5bC11oGzq9Ueujqg7J1LlYxdbkas6uzjKjSmt2OnLB1rlyNhrF4geRyZEigkGBuKkOS2gk2CNDCHvVvdQrpi0q+rVWmCDA+Cq1YKpokiGVxobJNY6sFQ48bUrXMa34Ws7kpLnMat4kIyv+77q3oxPRD7BtpkrMMOITX+SD5g75Pz0RXqgAAAB4nG2MyW6DQBiD+RKYpKT7vqf7Gg55pNHwEyJNGDSMRHj70nKtD7Zly45G0YA0+h8LRoyJSVBMmLJDyoxd9tjngEOOOOaEU84454JLrrjmhlvuuGfOA4888cwLr7zxzgeffPHNgixKtfeuzawUYTZYv16VITXaS8hy11azwf7FibGi/dS4Te2laWLj6k7lYiVIIv3aK9nWusqng2TLsXR900m2VMXaBvFxbXWnvBjn84mXor8pk54kqKa/NmUvVkyIg3NW/VK2jFvtKzQeR0uGRSgIrFlRYsip2FDT0LGNoh/MCkh9AAAA') format('woff')}[class*=' eruda-icon-'],[class^='eruda-icon-']{display:inline-block;font-family:eruda-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.eruda-icon-arrow-left:before{content:'\f101'}.eruda-icon-arrow-right:before{content:'\f102'}.eruda-icon-caret-down:before{content:'\f103'}.eruda-icon-caret-right:before{content:'\f104'}.eruda-icon-clear:before{content:'\f105'}.eruda-icon-compress:before{content:'\f106'}.eruda-icon-copy:before{content:'\f107'}.eruda-icon-delete:before{content:'\f108'}.eruda-icon-error:before{content:'\f109'}.eruda-icon-expand:before{content:'\f10a'}.eruda-icon-eye:before{content:'\f10b'}.eruda-icon-filter:before{content:'\f10c'}.eruda-icon-play:before{content:'\f10d'}.eruda-icon-record:before{content:'\f10e'}.eruda-icon-refresh:before{content:'\f10f'}.eruda-icon-reset:before{content:'\f110'}.eruda-icon-search:before{content:'\f111'}.eruda-icon-select:before{content:'\f112'}.eruda-icon-tool:before{content:'\f113'}.eruda-icon-warn:before{content:'\f114'}@font-face{font-family:luna-console-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAasAAsAAAAACnAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAI4AAADcIsYnIk9TLzIAAAGYAAAAPgAAAFZWmlGRY21hcAAAAdgAAAD2AAACyDioZ9NnbHlmAAAC0AAAAZgAAAH8Lq6nDGhlYWQAAARoAAAAMQAAADZ25cSzaGhlYQAABJwAAAAdAAAAJAgCBBRobXR4AAAEvAAAABkAAABYGAH//GxvY2EAAATYAAAAGAAAAC4J8glUbWF4cAAABPAAAAAfAAAAIAEjAFBuYW1lAAAFEAAAASkAAAIWm5e+CnBvc3QAAAY8AAAAcAAAAJ7qA/7MeJxNjTsOwjAQRJ8TJzE2hPBrKBBHQByAAiGqFBRcIBVCiqhyBA7O2AgRr9Y7M2+lxQCeAyeyy7W9U/fd8GKL5fsiH2vTPx8d7ufEbJpO/aagYc+RM7fEjBKnmiRuySmZUTNNf0wybYSRj9VoO4iU7NQh+Up8qelZs5EupP75Shfm2oz3Kmkvt/gARcgJKwAAeJxjYGQUZ5zAwMrAwNTJdIaBgaEfQjO+ZjBi5ACKMrAyM2AFAWmuKQwHGHQ/srGAuDEsTGBhRhABALQ1CMwAAHiczdJNbsIwEIbh1+QHQsJviNRFF1XX7aEQRZQNRQjEHXqgrnopn4B+E8+qqip117GeRB4nk4lloAAyeZIcwicBiw9lQ5/PGPf5nHfNV8yVyXlmzZY9R05cuMbydtOqZTfsOCh7Vjb02e8RVMXGHfc8aDxqwFKVF7QMtdLpmzUVDSOmTJjpnUH/3YJSBcofqv4Wyz8+b6FuWvXSjW1SV30r1sl/icYuofFZh+1+Yn+7dnPZuIW8uFa2big7t5JXZzX3znbh4Gp5c5UcnfVyciM5u6lc3ESuTnsZQ2JnLQ4S7J4ldjZjntj5jEVi5zaWCeUXWN4q9AAAeJxdUMFOU0EUnTMzb2o1FB5O5wENg31k5mExVEo7jSGBEuO6CStDmtbIBuiKBYg/gRu/ABO3/ocscOEXsHBpogtWvFfnvQgxJnduztx7zknuIXQyIYSDE9IgLwmBmIZI1pDYbTSxBqeW4KvrVKSmaaRKFZREE7YJIyONSLW6W37bLiRxscXNTH1zbnFqlnJ5Eu+G9MnT8JBy9l69ELx69Ohd9JCryrwcU07TbCU5H4y+jQbnyco/EF+8x1/eaX03bCzR8IgGwVn0WC/I8YOzaLGS+4+p4K8O/lcXkPhj/CP0ig1JQIhJyugCxz3o7LqH4YUH0L3swlMK3q+CV/HMbhkJAqlarm1jgd+97DpnfsKPeH15eT2+l9L5OJ/kcjZJfY6MU++wQPzI+PRECUJjo97aAtqupaqhFLHtRLHNf1Kwn9lAOid9L7tV9nzVldNL3dC+NmrGOGM+sme2VrO335Mda3foXlXravY57zemY23HkLs72RsW5JegDjZK99FnPPtwl8FX1i92IfAax6yfvkWf/AHb1F1JeJxjYGRgYABi3/mPYuP5bb4ycLOABKI4H+9rgNH//zIwsDCzMAElOBhAJAMAQ2IK+QAAAHicY2BkYGBhAAEWhv9///9lYWZgZEAFYgBbLQQgAAAAeJxjYGBgYGH4/58FTIPZf2FsSgAAM58EEwAAAHicY2AAgjyGJoYlDI8YPjD8ww8BeTMTR3icY2BkYGAQY3BhYGYAASYg5gJCBob/YD4DABGFAXQAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxtxksOgjAUQNF3kaIW/x9cBYtqgEAnLXlp0+1rwtQzuVcq2Vj5r6NiR42hYc+BI5aWE2cuXLlx58GTF286PmIm1ajGhzWnJub0S12cBjs4nVI/xhLabdXPS2JCiXgCK5lEwTHQMzKziHwBqnYYpg==') format('woff')}[class*=' luna-console-icon-'],[class^=luna-console-icon-]{display:inline-block;font-family:luna-console-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-console-icon-error:before{content:'\f101'}.luna-console-icon-input:before{content:'\f102'}.luna-console-icon-output:before{content:'\f103'}.luna-console-icon-warn:before{content:'\f104'}.luna-console-icon-caret-down:before{content:'\f105'}.luna-console-icon-caret-right:before{content:'\f106'}.luna-console{background:#fff;overflow-y:auto;-webkit-overflow-scrolling:touch;height:100%;position:relative;will-change:scroll-position;cursor:default;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-console.luna-console-theme-dark{background-color:#141414}.luna-console-hidden{display:none}.luna-console-fake-logs{position:absolute;left:0;top:0;pointer-events:none;visibility:hidden;width:100%}.luna-console-logs{padding-top:1px;position:absolute;width:100%}.luna-console-log-container{box-sizing:content-box}.luna-console-log-container.luna-console-selected .luna-console-log-item{background:#ecf1f8}.luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#ccdef5}.luna-console-header{white-space:nowrap;display:flex;font-size:11px;color:#545454;border-top:1px solid transparent;border-bottom:1px solid #ccc}.luna-console-header .luna-console-time-from-container{overflow-x:auto;-webkit-overflow-scrolling:touch;padding:3px 10px}.luna-console-nesting-level{width:14px;flex-shrink:0;margin-top:-1px;margin-bottom:-1px;position:relative;border-right:1px solid #ccc}.luna-console-nesting-level.luna-console-group-closed::before{content:""}.luna-console-nesting-level::before{border-bottom:1px solid #ccc;position:absolute;top:0;left:0;margin-left:100%;width:5px;height:100%;box-sizing:border-box}.luna-console-log-item{position:relative;display:flex;border-top:1px solid transparent;border-bottom:1px solid #ccc;margin-top:-1px;color:#333}.luna-console-log-item:after{content:"";display:block;clear:both}.luna-console-log-item .luna-console-code{display:inline;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace}.luna-console-log-item .luna-console-code .luna-console-keyword{color:#881280}.luna-console-log-item .luna-console-code .luna-console-number{color:#1c00cf}.luna-console-log-item .luna-console-code .luna-console-operator{color:gray}.luna-console-log-item .luna-console-code .luna-console-comment{color:#236e25}.luna-console-log-item .luna-console-code .luna-console-string{color:#1a1aa6}.luna-console-log-item a{color:#15c!important}.luna-console-log-item .luna-console-icon-container{margin:0 -6px 0 10px}.luna-console-log-item .luna-console-icon-container .luna-console-icon{line-height:20px;font-size:12px;color:#333;position:relative}.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-log-item .luna-console-icon-container .luna-console-icon-caret-right{top:0;left:-2px}.luna-console-log-item .luna-console-icon-container .luna-console-icon-error{top:0;color:#ef3842}.luna-console-log-item .luna-console-icon-container .luna-console-icon-warn{top:0;color:#e8a400}.luna-console-log-item .luna-console-count{background:#8097bd;color:#fff;padding:2px 4px;border-radius:10px;font-size:12px;float:left;margin:1px -6px 0 10px}.luna-console-log-item .luna-console-log-content-wrapper{flex:1;overflow:hidden}.luna-console-log-item .luna-console-log-content{padding:3px 0;margin:0 10px;overflow-x:auto;-webkit-overflow-scrolling:touch;white-space:pre-wrap;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-console-log-item .luna-console-log-content *{-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-console-log-item .luna-console-log-content>*{vertical-align:top}.luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-log-item .luna-console-log-content .luna-console-undefined{color:#5e5e5e}.luna-console-log-item .luna-console-log-content .luna-console-number{color:#1c00cf}.luna-console-log-item .luna-console-log-content .luna-console-boolean{color:#0d22aa}.luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-log-item .luna-console-log-content .luna-console-symbol{color:#881391}.luna-console-log-item .luna-console-data-grid,.luna-console-log-item .luna-console-dom-viewer{white-space:initial}.luna-console-log-item.luna-console-error{z-index:50;background:#fff0f0;color:red;border-top:1px solid #ffd6d6;border-bottom:1px solid #ffd6d6}.luna-console-log-item.luna-console-error .luna-console-stack{padding-left:1.2em;white-space:nowrap}.luna-console-log-item.luna-console-error .luna-console-count{background:red}.luna-console-log-item.luna-console-debug{z-index:20}.luna-console-log-item.luna-console-input{border-bottom-color:transparent}.luna-console-log-item.luna-console-warn{z-index:40;color:#5c5c00;background:#fffbe5;border-top:1px solid #fff5c2;border-bottom:1px solid #fff5c2}.luna-console-log-item.luna-console-warn .luna-console-count{background:#e8a400}.luna-console-log-item.luna-console-info{z-index:30}.luna-console-log-item.luna-console-group,.luna-console-log-item.luna-console-groupCollapsed{font-weight:700}.luna-console-preview{display:inline-block}.luna-console-preview .luna-console-preview-container{display:flex;align-items:center}.luna-console-preview .luna-console-json{overflow-x:auto;-webkit-overflow-scrolling:touch;padding-left:12px}.luna-console-preview .luna-console-preview-icon-container{display:block}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon{position:relative;font-size:12px}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon-caret-down{top:2px}.luna-console-preview .luna-console-preview-icon-container .luna-console-icon-caret-right{top:1px}.luna-console-preview .luna-console-preview-content-container{word-break:break-all}.luna-console-preview .luna-console-descriptor,.luna-console-preview .luna-console-object-preview{font-style:italic}.luna-console-preview .luna-console-key{color:#881391}.luna-console-preview .luna-console-number{color:#1c00cf}.luna-console-preview .luna-console-null{color:#5e5e5e}.luna-console-preview .luna-console-string{color:#c41a16}.luna-console-preview .luna-console-boolean{color:#0d22aa}.luna-console-preview .luna-console-special{color:#5e5e5e}.luna-console-theme-dark{color-scheme:dark}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item{background:#29323d}.luna-console-theme-dark .luna-console-log-container.luna-console-selected .luna-console-log-item:not(.luna-console-error):not(.luna-console-warn){border-color:#4173b4}.luna-console-theme-dark .luna-console-log-item{color:#a5a5a5;border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-keyword{color:#e36eec}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-operator{color:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-comment{color:#747474}.luna-console-theme-dark .luna-console-log-item .luna-console-code .luna-console-string{color:#f29766}.luna-console-theme-dark .luna-console-log-item.luna-console-error{background:#290000;color:#ff8080;border-top-color:#5c0000;border-bottom-color:#5c0000}.luna-console-theme-dark .luna-console-log-item.luna-console-error .luna-console-count{background:#ff8080}.luna-console-theme-dark .luna-console-log-item.luna-console-warn{color:#ffcb6b;background:#332a00;border-top-color:#650;border-bottom-color:#650}.luna-console-theme-dark .luna-console-log-item .luna-console-count{background:#42597f;color:#949494}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-null,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-undefined{color:#7f7f7f}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-boolean,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-regexp,.luna-console-theme-dark .luna-console-log-item .luna-console-log-content .luna-console-symbol{color:#e36eec}.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-down,.luna-console-theme-dark .luna-console-icon-container .luna-console-icon-caret-right{color:#9aa0a6}.luna-console-theme-dark .luna-console-header{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level{border-right-color:#3d3d3d}.luna-console-theme-dark .luna-console-nesting-level::before{border-bottom-color:#3d3d3d}.luna-console-theme-dark .luna-console-preview .luna-console-key{color:#e36eec}.luna-console-theme-dark .luna-console-preview .luna-console-number{color:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-null{color:#7f7f7f}.luna-console-theme-dark .luna-console-preview .luna-console-string{color:#f29766}.luna-console-theme-dark .luna-console-preview .luna-console-boolean{color:#9980ff}.luna-console-theme-dark .luna-console-preview .luna-console-special{color:#7f7f7f}@font-face{font-family:luna-object-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS8AAsAAAAAB7QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAGEAAACMISgl+k9TLzIAAAFsAAAAPQAAAFZLxUkWY21hcAAAAawAAADWAAACdBU42qdnbHlmAAAChAAAAC4AAAAwabU7V2hlYWQAAAK0AAAALwAAADZzjr4faGhlYQAAAuQAAAAYAAAAJAFyANlobXR4AAAC/AAAABAAAABAAZAAAGxvY2EAAAMMAAAAEAAAACIAtACobWF4cAAAAxwAAAAfAAAAIAEbAA9uYW1lAAADPAAAASkAAAIWm5e+CnBvc3QAAARoAAAAUwAAAHZW8MNZeJxNjTsOQFAQRc/z/+sV1mABohKV0gZeJRJR2X9cT4RJZu7nFIMBMjoGvHGaF6rdngcNAc/c/O/Nvq2W5E1igdNE2zv1iGh1c5FQPlYXUlJRyxt9+/pUKadQa/AveGEGZQAAAHicY2BkkGScwMDKwMBQx9ADJGWgdAIDJ4MxAwMTAyszA1YQkOaawnCAQfcjE8MJIFcITDIwMIIIAFqDCGkAAAB4nM2STQ4BQRCFv54ZP8MwFhYW4gQcShBsSERi50BWDuFCcwJedddKRGKnOt8k9aanqudVAy0gF3NRQLgTsLhJDVHP6UW94Kp8zEhKwYIlG/YcOXHm0mTPp96aumLLwdUQ1fcIqmJrwpSZL+iqak5JmyE1Ayr1bdGhr/2ZPmp/qPQtuj/uJzqQl+pfDyypesQD6AT/ElV8PjyrMccT9rdLR3PUFBI227VTio1jbm6dodg5VnPvmAsHxzofHfmi+Sbs/pwdWcXFkWdNSNg9arIE2QufuSCyAAB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOINe2b6x/PbfGXgZjgBFIjifLyvAUEDwUqGZUCSg4EJxAEAUn4LLAB4nGNgZGBgOMHAACdXMjAyoAIBADizAkx4nGNgAIITUEwGAABZUAGReJxjYAACHgYJ3BAAE94BXXicY2BkYGAQYGBmANEMDExAzAWEDAz/wXwGAApcASsAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxjkOgCAUANE/uOOGB+FQBIjaaEJIuL6FsfE1M6Lk9fXPoKioaWjp6BnQjEzMLKwYNtHepZhtuMs1vpvO/ch4HIlIxhK4KVyc7BwiD8nvDlkA') format('woff')}[class*=' luna-object-viewer-icon-'],[class^=luna-object-viewer-icon-]{display:inline-block;font-family:luna-object-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-object-viewer-icon-caret-down:before{content:'\f101'}.luna-object-viewer-icon-caret-right:before{content:'\f102'}.luna-object-viewer{overflow-x:auto;-webkit-overflow-scrolling:touch;overflow-y:hidden;cursor:default;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;font-size:12px;line-height:1.2;min-height:100%;color:#333;list-style:none!important}.luna-object-viewer ul{list-style:none!important;padding:0!important;padding-left:12px!important;margin:0!important}.luna-object-viewer li{position:relative;white-space:nowrap;line-height:16px;min-height:16px}.luna-object-viewer>li>.luna-object-viewer-key{display:none}.luna-object-viewer span{position:static!important}.luna-object-viewer li .luna-object-viewer-collapsed~.luna-object-viewer-close:before{color:#999}.luna-object-viewer-array .luna-object-viewer-object .luna-object-viewer-key{display:inline}.luna-object-viewer-null{color:#5e5e5e}.luna-object-viewer-regexp,.luna-object-viewer-string{color:#c41a16}.luna-object-viewer-number{color:#1c00cf}.luna-object-viewer-boolean{color:#0d22aa}.luna-object-viewer-special{color:#5e5e5e}.luna-object-viewer-key,.luna-object-viewer-key-lighter{color:#881391}.luna-object-viewer-key-lighter{opacity:.6}.luna-object-viewer-key-special{color:#5e5e5e}.luna-object-viewer-collapsed .luna-object-viewer-icon,.luna-object-viewer-expanded .luna-object-viewer-icon{position:absolute!important;left:-12px;color:#727272;font-size:12px}.luna-object-viewer-icon-caret-right{top:0}.luna-object-viewer-icon-caret-down{top:1px}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-down{display:inline}.luna-object-viewer-expanded>.luna-object-viewer-icon-caret-right{display:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-down{display:none}.luna-object-viewer-collapsed>.luna-object-viewer-icon-caret-right{display:inline}.luna-object-viewer-hidden~ul{display:none}.luna-object-viewer-theme-dark{color:#fff}.luna-object-viewer-theme-dark .luna-object-viewer-null,.luna-object-viewer-theme-dark .luna-object-viewer-special{color:#a1a1a1}.luna-object-viewer-theme-dark .luna-object-viewer-regexp,.luna-object-viewer-theme-dark .luna-object-viewer-string{color:#f28b54}.luna-object-viewer-theme-dark .luna-object-viewer-boolean,.luna-object-viewer-theme-dark .luna-object-viewer-number{color:#9980ff}.luna-object-viewer-theme-dark .luna-object-viewer-key,.luna-object-viewer-theme-dark .luna-object-viewer-key-lighter{color:#5db0d7}@font-face{font-family:luna-dom-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAASgAAsAAAAAB4QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFwAAACMIRYl8k9TLzIAAAFkAAAAPQAAAFZLxUkaY21hcAAAAaQAAADHAAACWBcU1KRnbHlmAAACbAAAAC4AAAAwabU7V2hlYWQAAAKcAAAALwAAADZzjr4faGhlYQAAAswAAAAYAAAAJAFyANdobXR4AAAC5AAAABAAAAA4AZAAAGxvY2EAAAL0AAAAEAAAAB4AnACQbWF4cAAAAwQAAAAfAAAAIAEZAA9uYW1lAAADJAAAASkAAAIWm5e+CnBvc3QAAARQAAAATgAAAG5m1cqleJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiC2AdNMDGwMckCSGyzHCuSxA2kuIJ+HgReoggtJnANMcwJFGRmYAXZLBkt4nGNgZJBlnMDAysDAUMfQAyRloHQCAyeDMQMDEwMrMwNWEJDmmsJwgEH3IxPDCSBXCEwyMDCCCABbzwhtAAAAeJy1kksKwjAQhr/0oX0JLlyIZ9BDCQXtRkEEwQO56uV6Av0nmZWI4MIJX2H+JvNIBiiBXGxFAWEkYPaQGqKe00S94C5/xVJKwY49PQNnLly5Tdnzqb9JPXByNUT13YKipLVm4wvmilvR0ilfrboKFsy0N9OB2Yco32z+437SLVTQdo05dUksgF8z/8+6+B3dU2m67YR1u3fsLXtH7egtEq04OhZpcKzbk1OLs2NzcXE0F3rNhOW9ObqbKSRsVqYsQfYC6fYeiQB4nGNgZACBlQzTGZgYGMyVxVc2O073AIpAxHsYloHFRc2dPZY2OTIwAACmEQesAAB4nGNgZGBgAOLeSTNM4/ltvjJwM5wACkRxPt7XgKCBYCXDMiDJwcAE4gAAQEgKxAB4nGNgZGBgOMHAACdXMjAyoAI+ADixAkp4nGNgAIITUEwCAABMyAGReJxjYAACHgYJ7BAADsoBLXicY2BkYGDgY2BmANEMDExAzAWEDAz/wXwGAAomASkAeJxlkD1uwkAUhMdgSAJSghQpKbNVCiKZn5IDQE9Bl8KYtTGyvdZ6QaLLCXKEHCGniHKCHChj82hgLT9/M2/e7soABviFh3p5uG1qvVq4oTpxm/Qg7JOfhTvo40W4S38o3MMbpsJ9POKdO3j+HZ0BSuEW7vEh3Kb/KeyTv4Q7eMK3cJf+j3APK/wJ9/HqDdPIFLEp3FIn+yy0Z3n+rrStUlOoSTA+WwtdaBs6vVHro6oOydS5WMXW5GrOrs4yo0prdjpywda5cjYaxeIHkcmRIoJBgbipDktoJNgjQwh71b3UK6YtKvq1VpggwPgqtWCqaJIhlcaGyTWOrBUOPG1K1zGt+FrO5KS5zGreJCMr/u+6t6MT0Q+wbaZKzDDiE1/kg+YO+T89EV6oAAAAeJxdxk0KgCAUAOE3/adlJ/FQgqBuFETw+i2kTd9mRiYZvv4ZJmYWVjZ2Dk4UmosbwyPK1Vq69aVnPbamEBuOSqFj8WQSgUgTeQGPtA2iAAA=') format('woff')}[class*=' luna-dom-viewer-icon-'],[class^=luna-dom-viewer-icon-]{display:inline-block;font-family:luna-dom-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-dom-viewer-icon-arrow-down:before{content:'\f101'}.luna-dom-viewer-icon-arrow-right:before{content:'\f102'}.luna-dom-viewer{color:rgba(0,0,0,.88);background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;overflow-y:auto;-webkit-overflow-scrolling:touch;background:rgba(0,0,0,0);overflow-x:hidden;word-wrap:break-word;padding:0 0 0 12px;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;cursor:default;list-style:none}.luna-dom-viewer.luna-dom-viewer-platform-windows{font-family:"Segoe UI",Tahoma,sans-serif}.luna-dom-viewer.luna-dom-viewer-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-dom-viewer .luna-dom-viewer-hidden,.luna-dom-viewer.luna-dom-viewer-hidden{display:none}.luna-dom-viewer .luna-dom-viewer-invisible,.luna-dom-viewer.luna-dom-viewer-invisible{visibility:hidden}.luna-dom-viewer *{box-sizing:border-box}.luna-dom-viewer.luna-dom-viewer-theme-dark{color:rgba(255,255,255,.85);background-color:#141414}.luna-dom-viewer ul{list-style:none}.luna-dom-viewer.luna-dom-viewer-theme-dark{color:#e8eaed}.luna-dom-viewer-toggle{min-width:12px;margin-left:-12px}.luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-icon-arrow-right{position:absolute!important;font-size:12px!important}.luna-dom-viewer-tree-item{line-height:16px;min-height:16px;position:relative;z-index:10;outline:0}.luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection,.luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{display:block}.luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:#f2f7fd}.luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:#e0e0e0}.luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:#cfe8fc}.luna-dom-viewer-tree-item .luna-dom-viewer-icon-arrow-down{display:none}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-down{display:inline-block}.luna-dom-viewer-tree-item.luna-dom-viewer-expanded .luna-dom-viewer-icon-arrow-right{display:none}.luna-dom-viewer-html-tag{color:#881280}.luna-dom-viewer-tag-name{color:#881280}.luna-dom-viewer-attribute-name{color:#994500}.luna-dom-viewer-attribute-value{color:#1a1aa6}.luna-dom-viewer-attribute-value.luna-dom-viewer-attribute-underline{text-decoration:underline}.luna-dom-viewer-html-comment{color:#236e25}.luna-dom-viewer-selection{position:absolute;display:none;left:-10000px;right:-10000px;top:0;bottom:0;z-index:-1}.luna-dom-viewer-children{margin:0;overflow-x:visible;overflow-y:visible;padding-left:15px}.luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:#881280}.luna-dom-viewer-text-node .luna-dom-viewer-number{color:#1c00cf}.luna-dom-viewer-text-node .luna-dom-viewer-operator{color:gray}.luna-dom-viewer-text-node .luna-dom-viewer-comment{color:#236e25}.luna-dom-viewer-text-node .luna-dom-viewer-string{color:#1a1aa6}.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-down,.luna-dom-viewer-theme-dark .luna-dom-viewer-icon-arrow-right{color:#9aa0a6}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-tag,.luna-dom-viewer-theme-dark .luna-dom-viewer-tag-name{color:#5db0d7}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-name{color:#9bbbdc}.luna-dom-viewer-theme-dark .luna-dom-viewer-attribute-value{color:#f29766}.luna-dom-viewer-theme-dark .luna-dom-viewer-html-comment{color:#898989}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item:hover .luna-dom-viewer-selection{background:#083c69}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item.luna-dom-viewer-selected .luna-dom-viewer-selection{background:#454545}.luna-dom-viewer-theme-dark .luna-dom-viewer-tree-item.luna-dom-viewer-selected:focus .luna-dom-viewer-selection{background:#073d69}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-keyword{color:#e36eec}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-number{color:#9980ff}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-operator{color:#7f7f7f}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-comment{color:#747474}.luna-dom-viewer-theme-dark .luna-dom-viewer-text-node .luna-dom-viewer-string{color:#f29766}@font-face{font-family:luna-text-viewer-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,d09GRgABAAAAAAS0AAsAAAAAB2QAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAAFQAAAB0INElr09TLzIAAAFcAAAAPQAAAFZL+0klY21hcAAAAZwAAACfAAACEAEewxRnbHlmAAACPAAAAIYAAACkNSDggmhlYWQAAALEAAAALgAAADZzrb4oaGhlYQAAAvQAAAAWAAAAJAGRANNobXR4AAADDAAAABAAAAAoAZAAAGxvY2EAAAMcAAAAEAAAABYBWgFIbWF4cAAAAywAAAAdAAAAIAEXADtuYW1lAAADTAAAASkAAAIWm5e+CnBvc3QAAAR4AAAAOwAAAFJIWdOleJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBWAdNMDGwMQkAWK1CGlYEZyGMCstiBMpxAUUYGZgDbGgXDeJxjYGTQYJzAwMrAwFDH0AMkZaB0AgMngzEDAxMDKzMDVhCQ5prCcIAh+SMTwwkgVwhMMjAwgggAY84IrgAAAHicvZFLCsMwDERHzsdJ6aL0HD1VQiDQRbIN9Axd9aI+QTpjq5Bdd5F4Bo1lybIBNAAq8iA1YB8YZG+qlvUKl6zXGBjf6MofMWHGEyu2FPb9oCxULCtHs3yy+J2urg1rtojo0HM/MKnFGabOGlbdYvdT+1N6/7drXl8e6Vajo3efHP3b7HAUvntBMy1OJKujMTeHNZMV9McpFBC+tLgY4QB4nGNgZACBEwzrGdgZGOwZxdnVDdXNPfKEGlhchO0KhZtZ3IQYmMFq1jCsZpBi0GLQY2AwNzGzZjQSk2UUYdNmVFID8UyVRUXYlNRMlVGlTM1FjU3tmZkTmVhYmFRBhHwoCyuzKgtTIjMzWJg3ZClIGMRlZQmVB7GhMixM0aGhQIsB52sTqgAAeJxjYGRgYADi2JNxkvH8Nl8ZuBlOAAWiOB/va0DQQHCCYT2Q5GBgAnEANJ0KnQAAeJxjYGRgYDjBwIBEMjKgAi4AOvoCZQAAeJxjYACCE1CMBwAAM7gBkXicY2AAAiGGIFQIABXIAqN4nGNgZGBg4GLQZ2BmAAEmMI8LSP4H8xkADjQBUwAAAHicZZA9bsJAFITHYEgCUoIUKSmzVQoimZ+SA0BPQZfCmLUxsr3WekGiywlyhBwhp4hyghwoY/NoYC0/fzNv3u7KAAb4hYd6ebhtar1auKE6cZv0IOyTn4U76ONFuEt/KNzDG6bCfTzinTt4/h2dAUrhFu7xIdym/ynsk7+EO3jCt3CX/o9wDyv8Cffx6g3TyBSxKdxSJ/sstGd5/q60rVJTqEkwPlsLXWgbOr1R66OqDsnUuVjF1uRqzq7OMqNKa3Y6csHWuXI2GsXiB5HJkSKCQYG4qQ5LaCTYI0MIe9W91CumLSr6tVaYIMD4KrVgqmiSIZXGhsk1jqwVDjxtStcxrfhazuSkucxq3iQjK/7vurejE9EPsG2mSsww4hNf5IPmDvk/PRFeqAAAAHicXcU7CsAgFEXBe4x/l/kQBAtt3X0KSZNpRk7X91/F8eAJRBKZQqUp2Og2va19MAadyWJzpBd4kgcWAA==') format('woff')}[class*=' luna-text-viewer-icon-'],[class^=luna-text-viewer-icon-]{display:inline-block;font-family:luna-text-viewer-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-text-viewer-icon-check:before{content:'\f101'}.luna-text-viewer-icon-copy:before{content:'\f102'}.luna-text-viewer{color:#333;background-color:#fff;font-family:Arial,Helvetica,sans-serif;box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;padding:0;unicode-bidi:embed;position:relative;overflow:auto;border:1px solid #ccc}.luna-text-viewer.luna-text-viewer-platform-windows{font-family:'Segoe UI',Tahoma,sans-serif}.luna-text-viewer.luna-text-viewer-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-text-viewer .luna-text-viewer-hidden,.luna-text-viewer.luna-text-viewer-hidden{display:none}.luna-text-viewer .luna-text-viewer-invisible,.luna-text-viewer.luna-text-viewer-invisible{visibility:hidden}.luna-text-viewer *{box-sizing:border-box}.luna-text-viewer.luna-text-viewer-theme-dark{color:#d9d9d9;border-color:#3d3d3d;background:#242424}.luna-text-viewer:hover .luna-text-viewer-copy{opacity:1}.luna-text-viewer-table{display:table}.luna-text-viewer-table .luna-text-viewer-line-number,.luna-text-viewer-table .luna-text-viewer-line-text{padding:0}.luna-text-viewer-table-row{display:table-row}.luna-text-viewer-line-number{display:table-cell;padding:0 3px 0 8px!important;text-align:right;vertical-align:top;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;border-right:1px solid #ccc}.luna-text-viewer-line-text{display:table-cell;padding-left:4px!important;-webkit-user-select:text;-moz-user-select:text;-ms-user-select:text;user-select:text}.luna-text-viewer-copy{background:#fff;opacity:0;position:absolute;right:5px;top:5px;border:1px solid #ccc;border-radius:4px;width:25px;height:25px;text-align:center;line-height:25px;cursor:pointer;transition:opacity .3s,top .3s}.luna-text-viewer-copy .luna-text-viewer-icon-check{color:#188037}.luna-text-viewer-text{padding:4px;font-size:12px;font-family:ui-monospace,SFMono-Regular,SF Mono,Menlo,Consolas,Liberation Mono,monospace;box-sizing:border-box;white-space:pre;display:block}.luna-text-viewer-text.luna-text-viewer-line-numbers{padding:0}.luna-text-viewer-text.luna-text-viewer-wrap-long-lines{white-space:pre-wrap}.luna-text-viewer-text.luna-text-viewer-wrap-long-lines .luna-text-viewer-line-text{word-break:break-all}.luna-text-viewer-theme-dark{color-scheme:dark}.luna-text-viewer-theme-dark .luna-text-viewer-copy,.luna-text-viewer-theme-dark .luna-text-viewer-line-number{border-color:#3d3d3d}.luna-text-viewer-theme-dark .luna-text-viewer-copy .luna-text-viewer-icon-check{color:#81c995}.luna-text-viewer-theme-dark .luna-text-viewer-copy{background-color:#242424}@font-face{font-family:luna-notification-icon;src:url('data:application/x-font-woff;charset=utf-8;base64,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') format('woff')}[class*=' luna-notification-icon-'],[class^=luna-notification-icon-]{display:inline-block;font-family:luna-notification-icon!important;font-size:16px;font-style:normal;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.luna-notification-icon-info:before{content:'\f101'}.luna-notification-icon-check:before{content:'\f102'}.luna-notification-icon-warn:before{content:'\f103'}.luna-notification-icon-error:before{content:'\f104'}.luna-notification{color:rgba(0,0,0,.88);background-color:#fff;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";box-sizing:border-box;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;font-size:14px;position:relative;padding:20px;pointer-events:none;display:flex;flex-direction:column;overflow:hidden;background:rgba(0,0,0,0)}.luna-notification.luna-notification-platform-windows{font-family:"Segoe UI",Tahoma,sans-serif}.luna-notification.luna-notification-platform-linux{font-family:Roboto,Ubuntu,Arial,sans-serif}.luna-notification .luna-notification-hidden,.luna-notification.luna-notification-hidden{display:none}.luna-notification .luna-notification-invisible,.luna-notification.luna-notification-invisible{visibility:hidden}.luna-notification *{box-sizing:border-box}.luna-notification.luna-notification-theme-dark{color-scheme:dark;color:rgba(255,255,255,.85);background-color:#141414}.luna-notification.luna-notification-full{position:fixed;top:0;left:0;width:100%;height:100%}.luna-notification-item{display:flex;border:1px solid #d9d9d9;padding:10px 16px;color:rgba(0,0,0,.88);align-items:center;background:#fff}.luna-notification-lower{margin-top:16px}.luna-notification-upper{margin-bottom:16px}.luna-notification-icon-container{margin-right:8px;color:#fff;border-radius:50%;width:16px;height:16px;text-align:center;line-height:16px}.luna-notification-icon-container.luna-notification-info{background:#1677ff}.luna-notification-icon-container.luna-notification-info .luna-notification-icon{position:relative;top:-2px;font-size:12px}.luna-notification-icon-container.luna-notification-success{background:#52c41a}.luna-notification-icon-container.luna-notification-success .luna-notification-icon{position:relative;top:-1px;font-size:12px}.luna-notification-icon-container.luna-notification-warning{position:relative;top:-2px;color:#faad14}.luna-notification-icon-container.luna-notification-warning .luna-notification-icon{font-size:14px}.luna-notification-icon-container.luna-notification-error{position:relative;top:-1px;color:#ff4d4f}.luna-notification-icon-container.luna-notification-error .luna-notification-icon{font-size:14px}.luna-notification-theme-dark .luna-notification-item{border-color:#424242;box-shadow:0 6px 16px 0 rgba(0,0,0,.08),0 3px 6px -4px rgba(0,0,0,.12),0 9px 28px 8px rgba(0,0,0,.05);color:rgba(255,255,255,.85);background:#141414}.luna-notification-theme-dark .luna-notification-icon-container.luna-notification-info{background:#1668dc}.luna-notification-theme-dark .luna-notification-icon-container.luna-notification-success{background:#49aa19}.luna-notification-theme-dark .luna-notification-icon-container.luna-notification-warning{color:#d89614}.luna-notification-theme-dark .luna-notification-icon-container.luna-notification-error{color:#dc4446}</style>



    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gemini Chat - IA Conversaciones</title>
    
    <!-- Font: Inter -->
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&amp;display=swap">
    
    <!-- Font Awesome Icons -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <style>
        /* ===== VARIABLES ===== */
        :root {
            /* Light mode colors */
            --background-color: #f8f9fa;
            --secondary-background: #ffffff;
            --text-color: #333333;
            --secondary-text-color: #666666;
            --primary-color: #4f46e5;
            --primary-hover: #4338ca;
            --secondary-color: #6b7280;
            --border-color: #e5e7eb;
            --success-color: #22c55e;
            --danger-color: #ef4444;
            --warning-color: #f59e0b;
            --info-color: #3b82f6;
            
            /* Chat specific */
            --user-message-bg: #e9f0ff;
            --ai-message-bg: #f3f4f6;
            --user-message-text: #1e3a8a;
            --ai-message-text: #111827;
            
            /* Dimensions */
            --border-radius: 8px;
            --sidebar-width: 300px;
            --header-height: 60px;
            --footer-height: 60px;
            
            /* Typography */
            --font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            
            /* Animation */
            --transition-speed: 0.3s;
        }

        /* Dark mode colors */
        .dark-mode {
            --background-color: #121212;
            --secondary-background: #1e1e1e;
            --text-color: #f3f4f6;
            --secondary-text-color: #a1a1aa;
            --primary-color: #6366f1;
            --primary-hover: #818cf8;
            --secondary-color: #9ca3af;
            --border-color: #2d2d2d;
            --user-message-bg: #3730a3;
            --ai-message-bg: #27272a;
            --user-message-text: #e0e7ff;
            --ai-message-text: #e5e7eb;
        }

        /* ===== RESET & BASE STYLES ===== */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            background-color: var(--background-color);
            color: var(--text-color);
            line-height: 1.6;
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            transition: background-color var(--transition-speed), color var(--transition-speed);
        }

        a {
            color: var(--primary-color);
            text-decoration: none;
            transition: color var(--transition-speed);
        }

        a:hover {
            color: var(--primary-hover);
        }

        button {
            cursor: pointer;
            font-family: var(--font-family);
        }

        /* ===== LAYOUT ===== */
        header {
            height: var(--header-height);
            background-color: var(--secondary-background);
            border-bottom: 1px solid var(--border-color);
            position: sticky;
            top: 0;
            z-index: 100;
            transition: background-color var(--transition-speed), border-color var(--transition-speed);
        }

        .header-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 100%;
        }

        .logo a {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--text-color);
        }

        nav ul {
            display: flex;
            list-style: none;
            gap: 20px;
            align-items: center;
        }

        nav ul li a {
            color: var(--secondary-text-color);
            padding: 5px 10px;
            border-radius: var(--border-radius);
            cursor: pointer;
        }

        nav ul li a:hover {
            background-color: var(--border-color);
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 5px;
            color: var(--secondary-text-color);
        }

        .premium-badge {
            color: gold;
            margin-left: 5px;
        }

        #theme-toggle {
            background: none;
            border: none;
            color: var(--secondary-text-color);
            font-size: 1rem;
            padding: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        main {
            flex: 1;
            width: 100%;
            max-width: 1400px;
            margin: 0 auto;
            padding: 20px;
        }

        footer {
            height: var(--footer-height);
            background-color: var(--secondary-background);
            border-top: 1px solid var(--border-color);
            transition: background-color var(--transition-speed), border-color var(--transition-speed);
        }

        .footer-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 0 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            height: 100%;
            color: var(--secondary-text-color);
            font-size: 0.875rem;
        }

        .footer-links {
            display: flex;
            gap: 20px;
        }

        .footer-link {
            color: var(--secondary-text-color);
        }

        /* ===== FORM CONTROLS ===== */
        .form-group {
            margin-bottom: 20px;
        }

        .form-control {
            width: 100%;
            padding: 10px 15px;
            font-size: 1rem;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            background-color: var(--secondary-background);
            color: var(--text-color);
            transition: border-color var(--transition-speed), background-color var(--transition-speed);
        }

        .form-control:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        .checkbox-group {
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .form-check-input {
            width: 16px;
            height: 16px;
        }

        label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }

        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: var(--border-radius);
            font-weight: 500;
            cursor: pointer;
            transition: background-color var(--transition-speed), color var(--transition-speed);
        }

        .btn-primary {
            background-color: var(--primary-color);
            color: white;
        }

        .btn-primary:hover {
            background-color: var(--primary-hover);
        }

        .btn-secondary {
            background-color: var(--secondary-color);
            color: white;
        }

        .btn-secondary:hover {
            background-color: #4b5563;
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        .form-errors {
            color: var(--danger-color);
            font-size: 0.875rem;
            margin-top: 5px;
        }

        /* ===== FLASH MESSAGES ===== */
        .flash-messages {
            margin-bottom: 20px;
        }

        .flash {
            padding: 10px 15px;
            border-radius: var(--border-radius);
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .flash.success {
            background-color: rgba(34, 197, 94, 0.1);
            color: var(--success-color);
            border: 1px solid var(--success-color);
        }

        .flash.danger {
            background-color: rgba(239, 68, 68, 0.1);
            color: var(--danger-color);
            border: 1px solid var(--danger-color);
        }

        .flash.warning {
            background-color: rgba(245, 158, 11, 0.1);
            color: var(--warning-color);
            border: 1px solid var(--warning-color);
        }

        .flash.info {
            background-color: rgba(59, 130, 246, 0.1);
            color: var(--info-color);
            border: 1px solid var(--info-color);
        }

        .close-flash {
            background: none;
            border: none;
            color: inherit;
            font-size: 0.875rem;
        }

        /* ===== AUTH CONTAINER ===== */
        .auth-container {
            display: flex;
            max-width: 1100px;
            margin: 0 auto;
            border-radius: var(--border-radius);
            overflow: hidden;
            background-color: var(--secondary-background);
            box-shadow: 0 10px 25px rgba(0, 0, 0, 0.05);
            border: 1px solid var(--border-color);
        }

        .auth-box {
            flex: 1;
            padding: 40px;
            max-width: 500px;
        }

        .auth-title {
            font-size: 2rem;
            margin-bottom: 10px;
            color: var(--text-color);
        }

        .auth-subtitle {
            margin-bottom: 30px;
            color: var(--secondary-text-color);
        }

        .auth-tabs {
            display: flex;
            margin-bottom: 30px;
            border-bottom: 1px solid var(--border-color);
        }

        .auth-tab-btn {
            flex: 1;
            padding: 15px;
            border: none;
            background: none;
            color: var(--secondary-text-color);
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: all var(--transition-speed);
        }

        .auth-tab-btn:hover {
            color: var(--primary-color);
        }

        .auth-tab-btn.active {
            color: var(--primary-color);
            border-bottom: 3px solid var(--primary-color);
        }

        .auth-form {
            transition: opacity var(--transition-speed), transform var(--transition-speed);
        }

        .auth-form.hidden {
            display: none;
        }

        .auth-features {
            flex: 1;
            background-color: rgba(79, 70, 229, 0.03);
            padding: 40px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .auth-features h2 {
            margin-bottom: 30px;
            font-size: 1.75rem;
            color: var(--primary-color);
        }

        .feature-list {
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .feature-item {
            display: flex;
            gap: 15px;
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            margin: 0 auto 15px;
            background-color: rgba(79, 70, 229, 0.1);
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .feature-icon i {
            font-size: 1.5rem;
            color: var(--primary-color);
        }

        .feature-text h3 {
            margin-bottom: 5px;
        }

        /* ===== CHAT CONTAINER ===== */
        .chat-container {
            display: flex;
            height: calc(100vh - var(--header-height) - var(--footer-height) - 40px);
            border-radius: var(--border-radius);
            overflow: hidden;
            background-color: var(--secondary-background);
            border: 1px solid var(--border-color);
            transition: background-color var(--transition-speed), border-color var(--transition-speed);
        }

        /* Sidebar */
        .sidebar {
            width: var(--sidebar-width);
            border-right: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            transition: width var(--transition-speed), border-color var(--transition-speed);
        }

        .sidebar-header {
            padding: 15px;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .sidebar-toggle {
            background: none;
            border: none;
            color: var(--secondary-text-color);
            font-size: 1rem;
            cursor: pointer;
        }

        .new-chat-btn {
            display: flex;
            align-items: center;
            gap: 5px;
            padding: 8px 12px;
            background-color: var(--primary-color);
            color: white;
            border: none;
            border-radius: var(--border-radius);
            font-size: 0.875rem;
        }

        .new-chat-btn:hover {
            background-color: var(--primary-hover);
        }

        .conversations-list {
            flex: 1;
            overflow-y: auto;
            padding: 10px;
        }

        .conversation-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 10px;
            border-radius: var(--border-radius);
            cursor: pointer;
            margin-bottom: 5px;
            transition: background-color var(--transition-speed);
        }

        .conversation-item:hover {
            background-color: var(--border-color);
        }

        .conversation-item.active {
            background-color: rgba(79, 70, 229, 0.1);
            border-left: 3px solid var(--primary-color);
        }

        .conversation-item a {
            flex: 1;
            display: flex;
            align-items: center;
            gap: 10px;
            color: var(--text-color);
        }

        .conversation-title {
            flex: 1;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }

        .delete-conversation {
            background: none;
            border: none;
            color: var(--secondary-text-color);
            font-size: 0.875rem;
            opacity: 0.5;
            transition: opacity var(--transition-speed);
        }

        .delete-conversation:hover {
            opacity: 1;
            color: var(--danger-color);
        }

        .no-conversations {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100px;
            color: var(--secondary-text-color);
        }

        .premium-features-info {
            padding: 15px;
            border-top: 1px solid var(--border-color);
            font-size: 0.875rem;
        }

        .premium-features-list {
            list-style: none;
            margin-top: 10px;
        }

        .premium-features-list li {
            display: flex;
            align-items: center;
            gap: 5px;
            margin-bottom: 5px;
        }

        .upgrade-prompt {
            text-align: center;
            color: var(--secondary-text-color);
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 15px;
        }

        .upgrade-prompt i {
            color: gold;
        }
        
        .upgrade-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: var(--border-radius);
            cursor: pointer;
            font-weight: 500;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.2s;
        }
        
        .upgrade-btn:hover {
            background-color: var(--primary-hover);
        }
        
        .pending-subscription {
            background-color: var(--secondary-background);
            border-radius: var(--border-radius);
            padding: 20px;
            margin-top: 15px;
            border: 1px solid var(--border-color);
            display: flex;
            flex-direction: column;
            gap: 15px;
        }
        
        .premium-badge.pending {
            background-color: var(--warning-color);
        }
        
        .payment-details {
            background-color: rgba(0,0,0,0.03);
            border-radius: var(--border-radius);
            padding: 15px;
            margin-top: 10px;
        }
        
        .payment-details h4 {
            margin-top: 0;
            margin-bottom: 10px;
            font-size: 16px;
        }
        
        .payment-details ul {
            list-style-type: none;
            padding: 0;
            margin: 0 0 15px 0;
        }
        
        .payment-details li {
            padding: 8px 0;
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .payment-note {
            font-size: 14px;
            color: var(--secondary-text-color);
            font-style: italic;
            margin: 5px 0 0 0;
        }
        
        .btn-icon {
            border: none;
            background: none;
            cursor: pointer;
            color: var(--primary-color);
            padding: 3px;
            border-radius: 3px;
        }
        
        .btn-icon:hover {
            background-color: rgba(0,0,0,0.05);
        }

        /* Main Chat Area */
        .chat-main {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .message {
            display: flex;
            gap: 12px;
            max-width: 85%;
            animation: fadeIn 0.3s ease-in-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .user-message {
            align-self: flex-end;
        }

        .ai-message {
            align-self: flex-start;
        }

        .message-avatar {
            width: 32px;
            height: 32px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
        }

        .user-message .message-avatar {
            background-color: var(--primary-color);
        }

        .ai-message .message-avatar {
            background-color: var(--secondary-color);
        }

        .message-content {
            background-color: var(--user-message-bg);
            color: var(--user-message-text);
            padding: 12px 15px;
            border-radius: var(--border-radius);
            position: relative;
        }

        .ai-message .message-content {
            background-color: var(--ai-message-bg);
            color: var(--ai-message-text);
        }

        .message-text {
            word-wrap: break-word;
            white-space: pre-wrap;
        }

        .message-time {
            font-size: 0.75rem;
            opacity: 0.7;
            margin-top: 5px;
            text-align: right;
        }

        .typing-indicator {
            display: flex;
            gap: 5px;
            padding: 15px;
            align-self: flex-start;
            opacity: 0.7;
        }

        .typing-indicator.hidden {
            display: none;
        }

        .typing-dot {
            width: 8px;
            height: 8px;
            background-color: var(--secondary-text-color);
            border-radius: 50%;
            animation: typing-animation 1.5s infinite;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes typing-animation {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-10px); }
        }

        .chat-input-area {
            padding: 15px;
            border-top: 1px solid var(--border-color);
        }

        #message-form {
            display: flex;
            gap: 10px;
            align-items: flex-end;
        }

        #message-input {
            flex: 1;
            padding: 15px;
            border: 1px solid var(--border-color);
            border-radius: var(--border-radius);
            background-color: var(--background-color);
            color: var(--text-color);
            resize: none;
            font-family: var(--font-family);
            transition: height 0.2s ease, border-color var(--transition-speed);
        }

        #message-input:focus {
            outline: none;
            border-color: var(--primary-color);
        }

        #send-button {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 15px;
            border-radius: var(--border-radius);
            cursor: pointer;
            transition: background-color var(--transition-speed);
        }

        #send-button:hover {
            background-color: var(--primary-hover);
        }

        .chat-input-footer {
            margin-top: 10px;
            font-size: 0.75rem;
            color: var(--secondary-text-color);
            text-align: center;
        }

        .empty-chat {
            flex: 1;
            display: flex;
            justify-content: center;
            align-items: center;
            color: var(--secondary-text-color);
        }

        .empty-chat-content {
            max-width: 500px;
            text-align: center;
        }

        .empty-chat-icon {
            font-size: 3rem;
            margin-bottom: 20px;
            color: var(--primary-color);
        }

        .premium-tips {
            margin-top: 30px;
            background-color: rgba(79, 70, 229, 0.05);
            padding: 15px;
            border-radius: var(--border-radius);
            border: 1px solid rgba(79, 70, 229, 0.2);
            text-align: left;
        }

        .premium-tips h3 {
            display: flex;
            align-items: center;
            gap: 8px;
            margin-bottom: 10px;
            color: var(--primary-color);
        }

        .premium-tips i {
            color: gold;
        }

        .premium-tips ul {
            list-style: none;
        }

        .premium-tips li {
            margin-bottom: 8px;
            position: relative;
            padding-left: 20px;
        }

        .premium-tips li:before {
            content: '•';
            position: absolute;
            left: 0;
            color: var(--primary-color);
        }

        /* Welcome Screen */
        .welcome-section {
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            height: 100%;
            text-align: center;
            padding: 20px;
        }

        .welcome-content {
            max-width: 800px;
        }

        .welcome-content h1 {
            font-size: 2.5rem;
            margin-bottom: 15px;
            color: var(--primary-color);
        }

        .welcome-content p {
            font-size: 1.2rem;
            margin-bottom: 30px;
            color: var(--secondary-text-color);
        }

        .welcome-buttons {
            display: flex;
            gap: 15px;
            justify-content: center;
            margin-bottom: 40px;
        }

        .welcome-features {
            display: flex;
            gap: 30px;
            justify-content: center;
            flex-wrap: wrap;
            margin-top: 40px;
        }

        .feature {
            flex: 1;
            min-width: 200px;
            max-width: 250px;
            padding: 20px;
            border-radius: var(--border-radius);
            background-color: var(--background-color);
            border: 1px solid var(--border-color);
            text-align: center;
            transition: transform var(--transition-speed), box-shadow var(--transition-speed);
        }

        .feature:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
        }

        /* ===== RESPONSIVE DESIGN ===== */
        @media (max-width: 992px) {
            .chat-container {
                flex-direction: column;
                height: auto;
            }
            
            .sidebar {
                width: 100%;
                border-right: none;
                border-bottom: 1px solid var(--border-color);
            }
            
            .sidebar.collapsed {
                display: none;
            }
            
            .chat-main {
                height: calc(100vh - var(--header-height) - var(--footer-height) - 120px);
            }
            
            .auth-container {
                flex-direction: column;
            }
            
            .auth-box {
                max-width: 100%;
            }
        }

        @media (max-width: 768px) {
            .welcome-features {
                flex-direction: column;
                align-items: center;
            }
            
            .feature {
                max-width: 100%;
            }
            
            .message {
                max-width: 100%;
            }
        }

        @media (max-width: 576px) {
            .header-container {
                padding: 0 10px;
            }
            
            .logo a span {
                display: none;
            }
            
            nav ul {
                gap: 10px;
            }
            
            main {
                padding: 10px;
            }
            
            .chat-messages {
                padding: 10px;
            }
            
            .welcome-buttons {
                flex-direction: column;
                gap: 10px;
            }
        }
    </style>
</head><body class="light-mode dark-mode"><div id="eruda" style="all: initial;"></div><div class="__chobitsu-hide__" style="all: initial;"></div>

    <header>
        <div class="header-container">
            <div class="logo">
                <a href="#" id="home-link">
                    <svg width="40" height="40" viewBox="0 0 100 100" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <circle cx="50" cy="50" r="45" fill="var(--primary-color)"></circle>
                        <path d="M30 40L50 60L70 40" stroke="white" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"></path>
                        <path d="M30 60L50 80L70 60" stroke="white" stroke-width="6" stroke-linecap="round" stroke-linejoin="round"></path>
                    </svg>
                    <span>Gemini Chat</span>
                </a>
            </div>
            <nav>
                <ul>
                    <li id="user-nav-section" style="display: none;">
                        <span class="user-info">
                            <i class="fas fa-user"></i> <span id="username-display">Leo_okk_26</span>
                            <span id="premium-badge" class="premium-badge" style="display: none;">
                                <i class="fas fa-crown"></i>
                            </span>
                        </span>
                    </li>
                    <li id="admin-nav-link" style="display: none;">
                        <a id="admin-link">Admin</a>
                    </li>
                    <li id="logout-nav-link" style="display: none;">
                        <a id="logout-link">Cerrar Sesión</a>
                    </li>
                    <li id="login-nav-link" style="display: block;">
                        <a id="login-register-link">Iniciar Sesión / Registrarse</a>
                    </li>
                    <li>
                        <button id="theme-toggle" aria-label="Toggle dark mode"><i class="fas fa-sun"></i></button>
                    </li>
                </ul>
            </nav>
        </div>
    </header>

    <main>
        <div id="flash-messages" class="flash-messages"></div>
        
        <!-- Auth View (Login/Register) -->
        <div id="auth-view" style="display: none;">
            <div class="auth-container">
                <div class="auth-box">
                    <div class="auth-tabs">
                        <button class="auth-tab-btn active" data-target="login-form">Iniciar Sesión</button>
                        <button class="auth-tab-btn" data-target="register-form">Registrarse</button>
                    </div>
                    
                    <!-- Login Form -->
                    <div id="login-form" class="auth-form">
                        <h1 class="auth-title">Iniciar Sesión</h1>
                        <p class="auth-subtitle">¡Bienvenido de nuevo! Inicia sesión para continuar</p>
                        
                        <form id="login-form-element">
                            <div class="form-group">
                                <label for="login-username">Usuario</label>
                                <input type="text" id="login-username" class="form-control" placeholder="Ingresa tu nombre de usuario" required="">
                                <div class="form-errors login-username-error"></div>
                            </div>
                            
                            <div class="form-group">
                                <label for="login-password">Contraseña</label>
                                <input type="password" id="login-password" class="form-control" placeholder="Ingresa tu contraseña" required="">
                                <div class="form-errors login-password-error"></div>
                            </div>
                            
                            <div class="form-group checkbox-group">
                                <input type="checkbox" id="remember-me" class="form-check-input">
                                <label for="remember-me" class="form-check-label">Recordarme</label>
                            </div>
                            
                            <div class="form-group">
                                <button type="submit" class="btn btn-primary btn-block">Iniciar Sesión</button>
                            </div>
                        </form>
                    </div>
                    
                    <!-- Register Form -->
                    <div id="register-form" class="auth-form hidden">
                        <h1 class="auth-title">Crear Cuenta</h1>
                        <p class="auth-subtitle">Únete a Gemini Chat y comienza a conversar con IA</p>
                        
                        <form id="register-form-element">
                            <div class="form-group">
                                <label for="register-username">Usuario</label>
                                <input type="text" id="register-username" class="form-control" placeholder="Elige un nombre de usuario" required="">
                                <div class="form-errors register-username-error"></div>
                            </div>
                            
                            <div class="form-group">
                                <label for="register-email">Email</label>
                                <input type="email" id="register-email" class="form-control" placeholder="Ingresa tu email" required="">
                                <div class="form-errors register-email-error"></div>
                            </div>
                            
                            <div class="form-group">
                                <label for="register-password">Contraseña</label>
                                <input type="password" id="register-password" class="form-control" placeholder="Crea una contraseña" required="">
                                <div class="form-errors register-password-error"></div>
                            </div>
                            
                            <div class="form-group">
                                <label for="register-password2">Confirmar Contraseña</label>
                                <input type="password" id="register-password2" class="form-control" placeholder="Confirma tu contraseña" required="">
                                <div class="form-errors register-password2-error"></div>
                            </div>
                            
                            <div class="form-group">
                                <button type="submit" class="btn btn-primary btn-block">Registrarse</button>
                            </div>
                        </form>
                    </div>
                </div>
                
                <div class="auth-features">
                    <h2>Características de Gemini Chat</h2>
                    <div class="feature-list">
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-comment-dots"></i>
                            </div>
                            <div class="feature-text">
                                <h3>Conversaciones Inteligentes</h3>
                                <p>Experimenta respuestas naturales y útiles con Google Gemini 2.5 Pro</p>
                            </div>
                        </div>
                        
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-history"></i>
                            </div>
                            <div class="feature-text">
                                <h3>Historial de Conversaciones</h3>
                                <p>Guarda y revisa tus chats cuando quieras</p>
                            </div>
                        </div>
                        
                        <div class="feature-item">
                            <div class="feature-icon">
                                <i class="fas fa-crown"></i>
                            </div>
                            <div class="feature-text">
                                <h3>Características Premium</h3>
                                <p>Actualiza para obtener respuestas mejoradas y procesamiento prioritario</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Admin View -->
        <div id="admin-view" style="display: none;">
            <div class="admin-container">
                <div class="admin-header">
                    <h1>Panel de Administración</h1>
                    <p>Gestionar usuarios y acceso premium</p>
                </div>
                
                <div class="admin-content">
                    <div class="admin-sidebar">
                        <h2>Herramientas de Admin</h2>
                        <ul class="admin-menu">
                            <li class="active"><a href="#users">Gestión de Usuarios</a></li>
                            <li><a id="back-to-chat">Volver al Chat</a></li>
                        </ul>
                    </div>
                    
                    <div class="admin-main">
                        <div class="admin-section" id="users">
                            <h2>Gestión de Usuarios</h2>
                            
                            <div class="admin-form-container">
                                <h3>Actualizar Estado de Usuario</h3>
                                <form id="admin-form">
                                    <div class="form-group">
                                        <label for="admin-username">Usuario</label>
                                        <input type="text" id="admin-username" class="form-control" placeholder="Ingresa el nombre de usuario" required="">
                                    </div>
                                    
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="is-premium" class="form-check-input">
                                        <label for="is-premium" class="form-check-label">Usuario Premium</label>
                                    </div>
                                    
                                    <div class="form-group checkbox-group">
                                        <input type="checkbox" id="is-admin" class="form-check-input">
                                        <label for="is-admin" class="form-check-label">Usuario Administrador</label>
                                    </div>
                                    
                                    <div class="form-group">
                                        <button type="submit" class="btn btn-primary">Actualizar Usuario</button>
                                    </div>
                                </form>
                            </div>
                            
                            <div class="admin-table-container">
                                <h3>Lista de Usuarios</h3>
                                <table class="admin-table" id="users-table">
                                    <thead>
                                        <tr>
                                            <th>ID</th>
                                            <th>Usuario</th>
                                            <th>Email</th>
                                            <th>Premium</th>
                                            <th>Admin</th>
                                            <th>Creado</th>
                                        </tr>
                                    </thead>
                                    <tbody id="users-table-body">
                                        <!-- User rows will be added here -->
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chat View -->
        <div id="chat-view" style="display: block;">
            <div class="chat-container">
                <!-- Sidebar with conversation history (only visible for logged in users) -->
                <div class="sidebar" id="sidebar" style="display: none;">
                    <div class="sidebar-header">
                        <h2>Conversaciones</h2>
                        <button id="new-chat-btn" class="new-chat-btn">
                            <i class="fas fa-plus"></i> Nuevo Chat
                        </button>
                        <button id="sidebar-toggle" class="sidebar-toggle">
                            <i class="fas fa-chevron-left"></i>
                        </button>
                    </div>
                    <div class="conversations-list" id="conversations-list"><div class="conversation-item" data-id="1">
                    <a href="#" class="conversation-link" data-id="1">
                        <i class="fas fa-comment-dots"></i>
                        <span class="conversation-title">Ayuda con programación</span>
                    </a>
                    <button class="delete-conversation" data-id="1" title="Eliminar conversación">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </div><div class="conversation-item" data-id="2">
                    <a href="#" class="conversation-link" data-id="2">
                        <i class="fas fa-comment-dots"></i>
                        <span class="conversation-title">Información sobre IA</span>
                    </a>
                    <button class="delete-conversation" data-id="2" title="Eliminar conversación">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                </div></div>
                    
                    <!-- Premium features info -->
                    <div class="premium-features-info">
                        <div id="premium-info" style="display: none;">
                            <div class="premium-badge">
                                <i class="fas fa-crown"></i> Premium
                            </div>
                            <ul class="premium-features-list">
                                <li><i class="fas fa-check"></i> Respuestas mejoradas</li>
                                <li><i class="fas fa-check"></i> Procesamiento prioritario</li>
                                <li><i class="fas fa-check"></i> Mayor ventana de contexto</li>
                            </ul>
                        </div>
                        <div id="free-info" style="display: block;">
                            <div class="upgrade-prompt">
                                <p><i class="fas fa-star"></i> ¡Actualiza a Premium para características mejoradas!</p>
                                <button id="upgrade-premium-btn" class="btn btn-primary upgrade-btn">
                                    <i class="fas fa-crown"></i> Actualizar a Premium
                                </button>
                            </div>
                        </div>
                        
                        <!-- Sección de suscripción pendiente (se muestra cuando hay una suscripción en proceso) -->
                        <div id="pending-subscription-info" style="display: none;">
                            <div class="pending-subscription">
                                <div class="premium-badge pending">
                                    <i class="fas fa-hourglass-half"></i> Pendiente
                                </div>
                                <p>Tu solicitud de actualización a Premium está pendiente de confirmación.</p>
                                <div class="payment-details">
                                    <h4>Detalles de pago:</h4>
                                    <ul>
                                        <li><strong>CBU:</strong> <span id="payment-cbu">0000003100005229414401</span> <button id="copy-cbu-btn" class="btn-icon"><i class="fas fa-copy"></i></button></li>
                                        <li><strong>Monto:</strong> $<span id="payment-amount">2500</span> ARS</li>
                                        <li><strong>Referencia:</strong> <span id="payment-reference"></span> <button id="copy-reference-btn" class="btn-icon"><i class="fas fa-copy"></i></button></li>
                                    </ul>
                                    <p class="payment-note">Importante: Incluye la referencia en el concepto de la transferencia para que podamos identificar tu pago.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Main chat area -->
                <div class="chat-main">
                    <div id="welcome-view" class="welcome-section" style="display: flex;">
                        <div class="welcome-content">
                            <h1>Bienvenido a Gemini Chat</h1>
                            <p>Experimenta el poder del modelo de IA Nexus V1.1 Pro </p>
                            <div class="welcome-buttons">
                                <a id="welcome-login-btn" class="btn btn-primary">Iniciar Sesión / Registrarse</a>
                            </div>
                            <div class="welcome-features">
                                
                                
                                
                            </div>
                        </div>
                    </div>
                    
                    <div id="conversation-view" style="display: none;">
                        <div class="chat-messages" id="chat-messages">
                            <div class="empty-chat">
                                <div class="empty-chat-content">
                                    <i class="fas fa-comment-dots empty-chat-icon"></i>
                                    <h2>Comienza una nueva conversación</h2>
                                    <p>Escribe un mensaje abajo para empezar a chatear con Gemini AI</p>
                                    
                                    <div id="premium-tips" class="premium-tips" style="display: none;">
                                        <h3><i class="fas fa-crown"></i> Consejos Premium</h3>
                                        <ul>
                                            <li>Haz preguntas complejas para análisis detallados</li>
                                            <li>Prueba indicaciones de escritura creativa para salidas más largas</li>
                                            <li>Disfruta de parámetros de modelo mejorados para mejor calidad</li>
                                        </ul>
                                    </div>
                                </div>
                            </div>
                            
                            <div id="typing-indicator" class="typing-indicator hidden">
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                                <div class="typing-dot"></div>
                            </div>
                        </div>
                        
                        <div class="chat-input-area">
                            <form id="message-form" data-conversation-id="">
                                <textarea id="message-input" placeholder="Escribe tu mensaje aquí..." rows="1"></textarea>
                                <button type="submit" id="send-button">
                                    <i class="fas fa-paper-plane"></i>
                                </button>
                            </form>
                            <div class="chat-input-footer">
                                <p id="premium-status">
                                    <i class="fas fa-info-circle"></i> 
                                    <span id="free-status-text" style="display: inline;">Modo gratuito: Actualiza a premium para características mejoradas</span>
                                    <span id="premium-status-text" style="display: none;">Modo premium activado: Respuestas mejoradas con mayor ventana de contexto</span>
                                </p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer>
        <div class="footer-container">
            <p>© 2023 Gemini Chat | Impulsado por Google Gemini 2.5 Pro</p>
            <div class="footer-links">
                <a href="#" class="footer-link">Política de Privacidad</a>
                <a href="#" class="footer-link">Términos de Servicio</a>
            </div>
        </div>
    </footer>

    <script>
        // Estado de la aplicación
        const appState = {
            user: null, // Datos del usuario actual
            conversations: [], // Lista de conversaciones
            currentConversationId: null, // ID de la conversación actual
            messages: [], // Mensajes de la conversación actual
            darkMode: localStorage.getItem('theme') === 'dark' || window.matchMedia('(prefers-color-scheme: dark)').matches,
            apiUrl: window.location.origin, // URL base para las peticiones API
            eventSource: null, // Fuente de eventos para streaming de respuestas
        };

        // Elementos DOM
        const dom = {
            // Vistas
            authView: document.getElementById('auth-view'),
            chatView: document.getElementById('chat-view'),
            adminView: document.getElementById('admin-view'),
            welcomeView: document.getElementById('welcome-view'),
            conversationView: document.getElementById('conversation-view'),
            
            // Navegación
            userNavSection: document.getElementById('user-nav-section'),
            usernameDisplay: document.getElementById('username-display'),
            premiumBadge: document.getElementById('premium-badge'),
            adminNavLink: document.getElementById('admin-nav-link'),
            logoutNavLink: document.getElementById('logout-nav-link'),
            loginNavLink: document.getElementById('login-nav-link'),
            
            // Auth
            loginForm: document.getElementById('login-form-element'),
            registerForm: document.getElementById('register-form-element'),
            authTabs: document.querySelectorAll('.auth-tab-btn'),
            
            // Chat
            sidebar: document.getElementById('sidebar'),
            conversationsList: document.getElementById('conversations-list'),
            newChatBtn: document.getElementById('new-chat-btn'),
            messageForm: document.getElementById('message-form'),
            messageInput: document.getElementById('message-input'),
            messagesContainer: document.getElementById('chat-messages'),
            typingIndicator: document.getElementById('typing-indicator'),
            premiumInfo: document.getElementById('premium-info'),
            freeInfo: document.getElementById('free-info'),
            premiumTips: document.getElementById('premium-tips'),
            premiumStatusText: document.getElementById('premium-status-text'),
            freeStatusText: document.getElementById('free-status-text'),
            
            // Admin
            adminForm: document.getElementById('admin-form'),
            usersTableBody: document.getElementById('users-table-body'),
            
            // Otros
            flashMessages: document.getElementById('flash-messages'),
            themeToggle: document.getElementById('theme-toggle'),
        };

        // Enlaces de navegación
        document.getElementById('home-link').addEventListener('click', navigateToHome);
        document.getElementById('login-register-link').addEventListener('click', showAuthView);
        document.getElementById('welcome-login-btn').addEventListener('click', showAuthView);
        document.getElementById('logout-link').addEventListener('click', logout);
        document.getElementById('admin-link').addEventListener('click', showAdminView);
        document.getElementById('back-to-chat').addEventListener('click', showChatView);

        // Pestañas de autenticación
        dom.authTabs.forEach(button => {
            button.addEventListener('click', function() {
                // Quitar clase activa de todos los botones
                dom.authTabs.forEach(btn => btn.classList.remove('active'));
                // Añadir clase activa al botón clickeado
                this.classList.add('active');
                
                // Ocultar todos los formularios
                document.getElementById('login-form').classList.add('hidden');
                document.getElementById('register-form').classList.add('hidden');
                
                // Mostrar el formulario objetivo
                const targetForm = document.getElementById(this.getAttribute('data-target'));
                targetForm.classList.remove('hidden');
            });
        });

        // Formularios de autenticación
        dom.loginForm.addEventListener('submit', handleLogin);
        dom.registerForm.addEventListener('submit', handleRegister);

        // Chat
        dom.newChatBtn.addEventListener('click', createNewConversation);
        dom.messageForm.addEventListener('submit', sendMessage);
        
        // Redimensionar automáticamente el área de texto
        dom.messageInput.addEventListener('input', function() {
            this.style.height = 'auto';
            this.style.height = (this.scrollHeight) + 'px';
            
            // Restablecer altura si está vacío
            if (this.value === '') {
                this.style.height = 'auto';
            }
        });
        
        // Admin
        dom.adminForm.addEventListener('submit', updateUser);
        
        // Alternar tema
        dom.themeToggle.addEventListener('click', toggleTheme);
        
        // Aplicar tema guardado
        if (appState.darkMode) {
            document.body.classList.add('dark-mode');
            dom.themeToggle.innerHTML = '<i class="fas fa-sun"></i>';
        }

        // Al cargar la página
        document.addEventListener('DOMContentLoaded', function() {
            // Comprobar si el usuario está autenticado
            checkAuthentication();
            
            // Cerrar mensajes flash
            setupFlashMessageClosers();
        });

        // Funciones de autenticación
        function checkAuthentication() {
            // Simulamos una comprobación de autenticación
            // En una aplicación real, haríamos una solicitud al servidor
            const storedUser = localStorage.getItem('user');
            
            if (storedUser) {
                try {
                    appState.user = JSON.parse(storedUser);
                    updateUIForLoggedInUser();
                    fetchConversations();
                } catch (e) {
                    console.error('Error parsing stored user:', e);
                    localStorage.removeItem('user');
                    showWelcomeView();
                }
            } else {
                showWelcomeView();
            }
        }

        function handleLogin(e) {
            e.preventDefault();
            
            const username = document.getElementById('login-username').value.trim();
            const password = document.getElementById('login-password').value;
            const remember = document.getElementById('remember-me').checked;
            
            if (!username || !password) {
                showFlashMessage('Por favor, completa todos los campos', 'danger');
                return;
            }
            
            fetch('/api/auth/login', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    username,
                    password,
                    remember
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    // Guardar el usuario en el almacenamiento local
                    localStorage.setItem('user', JSON.stringify(data.user));
                    appState.user = data.user;
                    
                    showFlashMessage(data.message, 'success');
                    updateUIForLoggedInUser();
                } else {
                    showFlashMessage(data.message, 'danger');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showFlashMessage('Error al iniciar sesión. Inténtalo de nuevo.', 'danger');
            });
        }

        function handleRegister(e) {
            e.preventDefault();
            
            const username = document.getElementById('register-username').value.trim();
            const email = document.getElementById('register-email').value.trim();
            const password = document.getElementById('register-password').value;
            const password2 = document.getElementById('register-password2').value;
            
            if (!username || !email || !password || !password2) {
                showFlashMessage('Por favor, completa todos los campos', 'danger');
                return;
            }
            
            if (password !== password2) {
                showFlashMessage('Las contraseñas no coinciden', 'danger');
                return;
            }
            
            fetch('/api/auth/register', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                },
                body: JSON.stringify({
                    username,
                    email,
                    password,
                    password2
                })
            })
            .then(response => response.json())
            .then(data => {
                if (data.success) {
                    showFlashMessage(data.message, 'success');
                    
                    // Cambiar a la pestaña de inicio de sesión
                    dom.authTabs[0].click();
                    
                    // Limpiar el formulario
                    document.getElementById('register-username').value = '';
                    document.getElementById('register-email').value = '';
                    document.getElementById('register-password').value = '';
                    document.getElementById('register-password2').value = '';
                } else {
                    showFlashMessage(data.message, 'danger');
                }
            })
            .catch(error => {
                console.error('Error:', error);
                showFlashMessage('Error al registrar. Inténtalo de nuevo.', 'danger');
            });
        }

        function logout() {
            // Hacer una solicitud al servidor para cerrar sesión
            fetch('/api/auth/logout', {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json',
                }
            })
            .then(response => response.json())
            .then(data => {
                // Limpiar el estado de la aplicación
                appState.user = null;
                appState.conversations = [];
                appState.currentConversationId = null;
                appState.messages = [];
                
                // Limpiar el almacenamiento local
                localStorage.removeItem('user');
                
                // Actualizar la UI
                updateUIForLoggedOutUser();
                showFlashMessage(data.message || 'Has cerrado sesión exitosamente', 'success');
            })
            .catch(error => {
                console.error('Error:', error);
                
                // Aún así, limpiar estado local
                appState.user = null;
                localStorage.removeItem('user');
                updateUIForLoggedOutUser();
                showFlashMessage('Has cerrado sesión exitosamente', 'success');
            });
        }

        // Funciones de UI
        function updateUIForLoggedInUser() {
            // Mostrar/ocultar elementos de navegación
            dom.userNavSection.style.display = 'block';
            dom.usernameDisplay.textContent = appState.user.username;
            dom.logoutNavLink.style.display = 'block';
            dom.loginNavLink.style.display = 'none';
            
            // Mostrar/ocultar badge de premium
            if (appState.user.is_premium) {
                dom.premiumBadge.style.display = 'inline';
                dom.premiumInfo.style.display = 'block';
                dom.freeInfo.style.display = 'none';
                dom.premiumTips.style.display = 'block';
                dom.premiumStatusText.style.display = 'inline';
                dom.freeStatusText.style.display = 'none';
            } else {
                dom.premiumBadge.style.display = 'none';
                dom.premiumInfo.style.display = 'none';
                dom.freeInfo.style.display = 'block';
                dom.premiumTips.style.display = 'none';
                dom.premiumStatusText.style.display = 'none';
                dom.freeStatusText.style.display = 'inline';
            }
            
            // Mostrar/ocultar enlace de administrador
            if (appState.user.is_admin) {
                dom.adminNavLink.style.display = 'block';
            } else {
                dom.adminNavLink.style.display = 'none';
            }
            
            // Mostrar la vista de chat
            showChatView();
            dom.welcomeView.style.display = 'none';
            dom.conversationView.style.display = 'block';
            dom.sidebar.style.display = 'flex';
        }

        function updateUIForLoggedOutUser() {
            // Mostrar/ocultar elementos de navegación
            dom.userNavSection.style.display = 'none';
            dom.logoutNavLink.style.display = 'none';
            dom.loginNavLink.style.display = 'block';
            dom.adminNavLink.style.display = 'none';
            
            // Mostrar la vista de bienvenida
            showWelcomeView();
        }

        function navigateToHome() {
            if (appState.user) {
                showChatView();
            } else {
                showWelcomeView();
            }
        }

        function showWelcomeView() {
            dom.authView.style.display = 'none';
            dom.chatView.style.display = 'block';
            dom.adminView.style.display = 'none';
            dom.welcomeView.style.display = 'flex';
            dom.conversationView.style.display = 'none';
            dom.sidebar.style.display = 'none';
        }

        function showAuthView() {
            dom.authView.style.display = 'block';
            dom.chatView.style.display = 'none';
            dom.adminView.style.display = 'none';
        }

        function showChatView() {
            dom.authView.style.display = 'none';
            dom.chatView.style.display = 'block';
            dom.adminView.style.display = 'none';
            
            if (appState.user) {
                dom.welcomeView.style.display = 'none';
                dom.conversationView.style.display = 'block';
                dom.sidebar.style.display = 'flex';
            } else {
                dom.welcomeView.style.display = 'flex';
                dom.conversationView.style.display = 'none';
                dom.sidebar.style.display = 'none';
            }
        }

        function showAdminView() {
            if (!appState.user || !appState.user.is_admin) {
                showFlashMessage('Acceso denegado. Se requieren derechos de administrador.', 'danger');
                return;
            }
            
            dom.authView.style.display = 'none';
            dom.chatView.style.display = 'none';
            dom.adminView.style.display = 'block';
            
            // Cargar la lista de usuarios
            fetchUsers();
        }

        function showFlashMessage(message, category) {
            const flashElement = document.createElement('div');
            flashElement.classList.add('flash', category);
            flashElement.innerHTML = `
                ${message}
                <button class="close-flash" aria-label="Close message"><i class="fas fa-times"></i></button>
            `;
            
            dom.flashMessages.appendChild(flashElement);
            
            // Configurar el cierre del mensaje
            const closeButton = flashElement.querySelector('.close-flash');
            closeButton.addEventListener('click', function() {
                flashElement.style.opacity = '0';
                setTimeout(() => {
                    flashElement.remove();
                }, 300);
            });
            
            // Auto-cerrar después de 5 segundos
            setTimeout(() => {
                if (flashElement.parentNode) {
                    flashElement.style.opacity = '0';
                    setTimeout(() => {
                        if (flashElement.parentNode) {
                            flashElement.remove();
                        }
                    }, 300);
                }
            }, 5000);
        }

        function setupFlashMessageClosers() {
            document.querySelectorAll('.close-flash').forEach(button => {
                button.addEventListener('click', function() {
                    const flashMessage = this.parentElement;
                    flashMessage.style.opacity = '0';
                    setTimeout(() => {
                        flashMessage.style.display = 'none';
                    }, 300);
                });
            });
        }

        function toggleTheme() {
            document.body.classList.toggle('dark-mode');
            const isDarkMode = document.body.classList.contains('dark-mode');
            
            // Actualizar el icono del botón
            dom.themeToggle.innerHTML = isDarkMode ? '<i class="fas fa-sun"></i>' : '<i class="fas fa-moon"></i>';
            
            // Guardar la preferencia de tema
            localStorage.setItem('theme', isDarkMode ? 'dark' : 'light');
            appState.darkMode = isDarkMode;
        }

        // Funciones de chat
        function fetchConversations() {
            // Simulamos una solicitud para obtener las conversaciones
            // En una aplicación real, haríamos una solicitud GET al servidor
            
            // Simulamos un par de conversaciones
            const dummyConversations = [
                {
                    id: 1,
                    title: "Ayuda con programación",
                    updated_at: new Date(Date.now() - 3600000).toISOString() // 1 hora atrás
                },
                {
                    id: 2,
                    title: "Información sobre IA",
                    updated_at: new Date(Date.now() - 86400000).toISOString() // 1 día atrás
                }
            ];
            
            appState.conversations = dummyConversations;
            renderConversations();
        }

        function renderConversations() {
            if (appState.conversations.length === 0) {
                dom.conversationsList.innerHTML = `
                    <div class="no-conversations">
                        <p>No hay conversaciones aún</p>
                    </div>
                `;
                return;
            }
            
            dom.conversationsList.innerHTML = '';
            
            appState.conversations.forEach(conv => {
                const date = new Date(conv.updated_at);
                const timeString = date.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
                
                const conversationElement = document.createElement('div');
                conversationElement.classList.add('conversation-item');
                if (appState.currentConversationId === conv.id) {
                    conversationElement.classList.add('active');
                }
                conversationElement.setAttribute('data-id', conv.id);
                
                conversationElement.innerHTML = `
                    <a href="#" class="conversation-link" data-id="${conv.id}">
                        <i class="fas fa-comment-dots"></i>
                        <span class="conversation-title">${conv.title}</span>
                    </a>
                    <button class="delete-conversation" data-id="${conv.id}" title="Eliminar conversación">
                        <i class="fas fa-trash-alt"></i>
                    </button>
                `;
                
                dom.conversationsList.appendChild(conversationElement);
                
                // Evento para cargar la conversación
                conversationElement.querySelector('.conversation-link').addEventListener('click', (e) => {
                    e.preventDefault();
                    loadConversation(conv.id);
                });
                
                // Evento para eliminar la conversación
                conversationElement.querySelector('.delete-conversation').addEventListener('click', (e) => {
                    e.preventDefault();
                    e.stopPropagation();
                    if (confirm('¿Estás seguro de que quieres eliminar esta conversación?')) {
                        deleteConversation(conv.id);
                    }
                });
            });
        }

        function createNewConversation() {
            // Simulamos la creación de una nueva conversación
            // En una aplicación real, haríamos una solicitud POST al servidor
            
            const newConversation = {
                id: Date.now(), // ID único basado en timestamp
                title: "Nueva Conversación",
                updated_at: new Date().toISOString()
            };
            
            appState.conversations.unshift(newConversation);
            renderConversations();
            loadConversation(newConversation.id);
        }

        function loadConversation(conversationId) {
            // Configurar la conversación actual
            appState.currentConversationId = conversationId;
            dom.messageForm.setAttribute('data-conversation-id', conversationId);
            
            // Actualizar UI para mostrar la conversación activa
            document.querySelectorAll('.conversation-item').forEach(item => {
                if (parseInt(item.getAttribute('data-id')) === conversationId) {
                    item.classList.add('active');
                } else {
                    item.classList.remove('active');
                }
            });
            
            // Limpiar el contenedor de mensajes
            dom.messagesContainer.innerHTML = '';
            
            // Simulamos la carga de mensajes
            // En una aplicación real, haríamos una solicitud GET al servidor
            
            // Simulamos algunos mensajes para la conversación
            if (conversationId === 1) {
                appState.messages = [
                    {
                        id: 1,
                        content: "¿Puedes ayudarme con un problema de JavaScript?",
                        is_user: true,
                        timestamp: new Date(Date.now() - 3600000) // 1 hora atrás
                    },
                    {
                        id: 2,
                        content: "¡Claro! Estaré encantado de ayudarte con JavaScript. Por favor, describe el problema que estás teniendo.",
                        is_user: false,
                        timestamp: new Date(Date.now() - 3590000) // 1 hora menos 10 segundos atrás
                    }
                ];
            } else if (conversationId === 2) {
                appState.messages = [
                    {
                        id: 3,
                        content: "¿Qué es la inteligencia artificial generativa?",
                        is_user: true,
                        timestamp: new Date(Date.now() - 86400000) // 1 día atrás
                    },
                    {
                        id: 4,
                        content: "La inteligencia artificial generativa se refiere a sistemas de IA que pueden generar contenido nuevo, como texto, imágenes, música o código, en lugar de simplemente analizar o clasificar datos existentes.\n\nEjemplos populares incluyen:\n- Modelos de lenguaje como GPT (para texto)\n- DALL-E, Midjourney (para imágenes)\n- MuseNet (para música)\n\nEstos sistemas aprenden patrones de grandes conjuntos de datos y luego pueden crear contenido original que sigue esos patrones.",
                        is_user: false,
                        timestamp: new Date(Date.now() - 86395000) // 1 día menos 5 segundos atrás
                    }
                ];
            } else {
                appState.messages = [];
            }
            
            // Renderizar los mensajes
            renderMessages();
        }

        function renderMessages() {
            if (appState.messages.length === 0) {
                dom.messagesContainer.innerHTML = `
                    <div class="empty-chat">
                        <div class="empty-chat-content">
                            <i class="fas fa-comment-dots empty-chat-icon"></i>
                            <h2>Comienza una nueva conversación</h2>
                            <p>Escribe un mensaje abajo para empezar a chatear con Gemini AI</p>
                            
                            ${appState.user && appState.user.is_premium ? `
                            <div class="premium-tips">
                                <h3><i class="fas fa-crown"></i> Consejos Premium</h3>
                                <ul>
                                    <li>Haz preguntas complejas para análisis detallados</li>
                                    <li>Prueba indicaciones de escritura creativa para salidas más largas</li>
                                    <li>Disfruta de parámetros de modelo mejorados para mejor calidad</li>
                                </ul>
                            </div>
                            ` : ''}
                        </div>
                    </div>
                `;
                return;
            }
            
            dom.messagesContainer.innerHTML = '';
            
            appState.messages.forEach(message => {
                appendMessage(message.content, message.is_user, message.timestamp);
            });
            
            // Desplazarse al final de la conversación
            scrollToBottom();
        }

        function sendMessage(e) {
            e.preventDefault();
            
            const messageText = dom.messageInput.value.trim();
            if (!messageText) return;
            
            const conversationId = dom.messageForm.getAttribute('data-conversation-id') || '';
            
            // Agregar mensaje del usuario a la UI inmediatamente
            const userMessage = {
                id: Date.now(),
                content: messageText,
                is_user: true,
                timestamp: new Date()
            };
            
            appState.messages.push(userMessage);
            appendMessage(userMessage.content, true, userMessage.timestamp);
            
            // Limpiar el campo de entrada y restablecer altura
            dom.messageInput.value = '';
            dom.messageInput.style.height = 'auto';
            
            // Mostrar indicador de escritura
            dom.typingIndicator.classList.remove('hidden');
            
            // Desplazarse al final
            scrollToBottom();
            
            // Si es la primera mensaje en una nueva conversación, actualizar el título
            if (conversationId && appState.conversations.find(c => c.id == conversationId)?.title === "Nueva Conversación") {
                const conversation = appState.conversations.find(c => c.id == conversationId);
                if (conversation) {
                    conversation.title = messageText.length > 30 ? messageText.substring(0, 30) + "..." : messageText;
                    renderConversations();
                }
            }
            
            // Si es una nueva conversación, crear una
            if (!conversationId) {
                const newConversation = {
                    id: Date.now(),
                    title: messageText.length > 30 ? messageText.substring(0, 30) + "..." : messageText,
                    updated_at: new Date().toISOString()
                };
                
                appState.conversations.unshift(newConversation);
                appState.currentConversationId = newConversation.id;
                dom.messageForm.setAttribute('data-conversation-id', newConversation.id);
                renderConversations();
            }
            
            // Simular respuesta de la IA después de un breve retraso
            setTimeout(() => {
                // Simular una respuesta de la IA
                const aiResponse = getAIResponse(messageText);
                const aiMessage = {
                    id: Date.now() + 1,
                    content: aiResponse,
                    is_user: false,
                    timestamp: new Date()
                };
                
                // Ocultar indicador de escritura
                dom.typingIndicator.classList.add('hidden');
                
                // Agregar mensaje de la IA a la UI
                appState.messages.push(aiMessage);
                appendMessage(aiMessage.content, false, aiMessage.timestamp);
                
                // Desplazarse al final
                scrollToBottom();
            }, 1500); // Retraso simulado de 1.5 segundos
        }

        function getAIResponse(userMessage) {
            // Función para generar respuestas simuladas basadas en palabras clave en el mensaje del usuario
            const lowerMessage = userMessage.toLowerCase();
            
            if (lowerMessage.includes('hola') || lowerMessage.includes('hi') || lowerMessage.includes('hey')) {
                return "¡Hola! Soy Gemini, un asistente de IA. ¿En qué puedo ayudarte hoy?";
            }
            
            if (lowerMessage.includes('ayuda') || lowerMessage.includes('help')) {
                return "Estoy aquí para ayudarte. Puedo responder preguntas, proporcionar información, ayudar con tareas creativas como escritura, y mucho más. ¿Qué necesitas específicamente?";
            }
            
            if (lowerMessage.includes('gemini') || lowerMessage.includes('ai') || lowerMessage.includes('ia')) {
                return "Gemini es un modelo de inteligencia artificial desarrollado por Google. Es un modelo multimodal que puede trabajar con texto, código, audio e imágenes. Esta versión específica, Gemini 2.5 Pro, es una de las iteraciones más avanzadas del modelo.";
            }
            
            if (lowerMessage.includes('javascript') || lowerMessage.includes('js') || lowerMessage.includes('código')) {
                return "JavaScript es un lenguaje de programación muy popular para desarrollo web. Aquí tienes un ejemplo básico:\n\n```javascript\n// Una función simple que suma dos números\nfunction sumar(a, b) {\n  return a + b;\n}\n\nconsole.log(sumar(5, 3)); // Muestra: 8\n```\n\n¿Necesitas ayuda con algo específico de JavaScript?";
            }
            
            if (lowerMessage.includes('gracias') || lowerMessage.includes('thanks')) {
                return "¡De nada! Estoy aquí para ayudar. Si tienes más preguntas en el futuro, no dudes en preguntar.";
            }
            
            // Respuesta predeterminada
            return "Gracias por tu mensaje. Como asistente de IA, estoy diseñado para proporcionar información útil y asistencia en una variedad de temas. ¿Hay algo específico en lo que pueda ayudarte?";
        }

        function appendMessage(text, isUser, timestamp = new Date()) {
            const messageElement = document.createElement('div');
            messageElement.classList.add('message');
            messageElement.classList.add(isUser ? 'user-message' : 'ai-message');
            
            const timeString = timestamp.toLocaleTimeString([], {hour: '2-digit', minute:'2-digit'});
            
            messageElement.innerHTML = `
                <div class="message-avatar">
                    <i class="fas ${isUser ? 'fa-user' : 'fa-robot'}"></i>
                </div>
                <div class="message-content">
                    <div class="message-text">${formatMessageText(text)}</div>
                    <div class="message-time">${timeString}</div>
                </div>
            `;
            
            dom.messagesContainer.appendChild(messageElement);
            
            // Si el contenedor de mensajes contiene el elemento "empty-chat", eliminarlo
            const emptyChat = dom.messagesContainer.querySelector('.empty-chat');
            if (emptyChat) {
                emptyChat.remove();
            }
        }

        function formatMessageText(text) {
            // Formatear bloques de código
            text = text.replace(/```([\s\S]*?)```/g, '<pre><code>$1</code></pre>');
            
            // Formatear negrita
            text = text.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>');
            
            // Formatear cursiva
            text = text.replace(/\*(.*?)\*/g, '<em>$1</em>');
            
            // Formatear enlaces
            text = text.replace(/\[(.*?)\]\((.*?)\)/g, '<a href="$2" target="_blank">$1</a>');
            
            // Preservar saltos de línea
            text = text.replace(/\n/g, '<br>');
            
            return text;
        }

        function scrollToBottom() {
            if (dom.messagesContainer) {
                dom.messagesContainer.scrollTop = dom.messagesContainer.scrollHeight;
            }
        }

        function deleteConversation(conversationId) {
            // Simulamos la eliminación de una conversación
            // En una aplicación real, haríamos una solicitud DELETE al servidor
            
            appState.conversations = appState.conversations.filter(conv => conv.id != conversationId);
            
            if (appState.currentConversationId == conversationId) {
                appState.currentConversationId = null;
                appState.messages = [];
                dom.messageForm.setAttribute('data-conversation-id', '');
                
                // Renderizar el estado vacío
                dom.messagesContainer.innerHTML = `
                    <div class="empty-chat">
                        <div class="empty-chat-content">
                            <i class="fas fa-comment-dots empty-chat-icon"></i>
                            <h2>Comienza una nueva conversación</h2>
                            <p>Escribe un mensaje abajo para empezar a chatear con Gemini AI</p>
                            
                            ${appState.user && appState.user.is_premium ? `
                            <div class="premium-tips">
                                <h3><i class="fas fa-crown"></i> Consejos Premium</h3>
                                <ul>
                                    <li>Haz preguntas complejas para análisis detallados</li>
                                    <li>Prueba indicaciones de escritura creativa para salidas más largas</li>
                                    <li>Disfruta de parámetros de modelo mejorados para mejor calidad</li>
                                </ul>
                            </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            }
            
            renderConversations();
        }

        // Funciones de administración
        function fetchUsers() {
            // Simulamos una solicitud para obtener la lista de usuarios
            // En una aplicación real, haríamos una solicitud GET al servidor
            
            // Simulamos algunos usuarios
            const dummyUsers = [
                {
                    id: 1,
                    username: 'admin',
                    email: 'admin@example.com',
                    is_premium: true,
                    is_admin: true,
                    created_at: '2023-01-01T00:00:00Z'
                },
                {
                    id: 2,
                    username: 'usuario1',
                    email: 'usuario1@example.com',
                    is_premium: true,
                    is_admin: false,
                    created_at: '2023-01-15T00:00:00Z'
                },
                {
                    id: 3,
                    username: 'usuario2',
                    email: 'usuario2@example.com',
                    is_premium: false,
                    is_admin: false,
                    created_at: '2023-02-01T00:00:00Z'
                }
            ];
            
            renderUsers(dummyUsers);
        }

        function renderUsers(users) {
            dom.usersTableBody.innerHTML = '';
            
            users.forEach(user => {
                const date = new Date(user.created_at);
                const dateString = date.toLocaleDateString();
                
                const row = document.createElement('tr');
                row.innerHTML = `
                    <td>${user.id}</td>
                    <td>${user.username}</td>
                    <td>${user.email}</td>
                    <td>
                        <span class="status-badge ${user.is_premium ? 'premium' : 'free'}">
                            <i class="fas ${user.is_premium ? 'fa-check' : 'fa-times'}"></i>
                        </span>
                    </td>
                    <td>
                        <span class="status-badge ${user.is_admin ? 'admin' : 'not-admin'}">
                            <i class="fas ${user.is_admin ? 'fa-check' : 'fa-times'}"></i>
                        </span>
                    </td>
                    <td>${dateString}</td>
                `;
                
                dom.usersTableBody.appendChild(row);
            });
        }

        function updateUser(e) {
            e.preventDefault();
            
            const username = document.getElementById('admin-username').value.trim();
            const isPremium = document.getElementById('is-premium').checked;
            const isAdmin = document.getElementById('is-admin').checked;
            
            if (!username) {
                showFlashMessage('Por favor, ingresa un nombre de usuario', 'danger');
                return;
            }
            
            // Simulamos la actualización de un usuario
            // En una aplicación real, haríamos una solicitud PUT/PATCH al servidor
            
            // Simulamos encontrar un usuario (el usuario actual, para simplificar)
            if (appState.user && username === appState.user.username) {
                // Actualizar el usuario en el estado y almacenamiento local
                appState.user.is_premium = isPremium;
                appState.user.is_admin = isAdmin;
                localStorage.setItem('user', JSON.stringify(appState.user));
                
                // Actualizar la UI
                updateUIForLoggedInUser();
                
                showFlashMessage(`Usuario ${username} actualizado exitosamente`, 'success');
                
                // Recargar la lista de usuarios
                fetchUsers();
            } else {
                showFlashMessage(`Usuario ${username} no encontrado`, 'danger');
            }
        }
    </script>

</body></html>
